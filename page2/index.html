<!DOCTYPE html>
<html lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     영원 &middot; 웹 개발과 일상
    
  </title>

  
  <link rel="canonical" href="https://tocktock.github.io/page2/" />
  

  <link rel="stylesheet" href="https://tocktock.github.io/public/css/poole.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/syntax.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/lanyon.css" />

  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400"
  />

  <link
    rel="apple-touch-icon-precomposed"
    sizes="144x144"
    href="https://tocktock.github.io/public/apple-touch-icon-precomposed.png"
  />
  <link rel="shortcut icon" href="https://tocktock.github.io/public/favicon.ico" />

  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://tocktock.github.io/atom.xml"
  />

  <!-- <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "//www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-178749172-1", "auto");
    ga("send", "pageview");
  </script> -->
</head>


  <body>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" />

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item description">
    <p>Developer with Cat</p>
  </div>

  <nav class="sidebar-nav">
    <a
      class="sidebar-nav-item active"
      href="https://tocktock.github.io/"
      >Home</a
    >
                
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/about/"
        >About me</a
      >
                 
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/categories/"
        >Categories</a
      >
      
      <ul class="sidebar-categories">
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Algorithms"
            >Algorithms (28)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Jekyll"
            >Jekyll (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/elasticsearch"
            >elasticsearch (9)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/NestJS"
            >NestJS (3)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/DevTip"
            >DevTip (1)</a
          >
        </li>
        
      </ul>
                                                               
    </div>

    <a class="sidebar-nav-item" href="https://github.com/Tocktock/tocktock.github.io">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span>
  </nav>

  <div class="sidebar-item">
    <p>&copy; 2021. All rights reserved.</p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">영원</a>
            <small>웹 개발과 일상</small>
          </h3>
        </div>
      </div>

      <div class="container content"><div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-43/"> leetcode Multiply Strings 문제풀기 </a>
    </h1>

    <span class="post-date">25 Jan 2021</span>

    <p>#[leetcode][43] Multiply Strings 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/multiply-strings/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>숫자 두개를 문자열로 줄테니 곱해줘!</p>

<p>근데 숫자가 엄청 커 ㅎㅎ;;;</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/multiply-strings/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>BigInteger 를 쓰면 매우 쉽지만, <strong>그러라고 문제 푸는거 아니잖아 ? ? ?</strong></p>

<p>저는 학창시절 때 배웠던 곱셈 방식을 이용했습니다!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    1 2 3
    4 5 6
ㅡㅡㅡㅡㅡ
    7 3 8
  6 1 5 0
4 9 2 0 0
ㅡㅡㅡㅡㅡ
5 6 0 8 8
</code></pre></div></div>

<p>이런 식으로 중간 단계를 두어 123 * 6, 123 * 5, 123 * 4 를 한 후 한 자리씩 더해주었습니다.</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">num1</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">num2</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">)</span> <span class="k">return</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">num2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">answer</span> <span class="o">=</span> <span class="nx">strPlus</span><span class="p">(</span><span class="nx">answer</span><span class="p">,</span> <span class="nx">subMultiply</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">num2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">subMultiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">str1</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">pos</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">let</span> <span class="nx">carryOut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">str1</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">target</span> <span class="o">+</span> <span class="nx">carryOut</span><span class="p">;</span>
    <span class="nx">carryOut</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span> <span class="o">%</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">carryOut</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">carryOut</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">gather</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pos</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">gather</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">strPlus</span> <span class="o">=</span> <span class="p">(</span><span class="nx">str1</span><span class="p">,</span> <span class="nx">str2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// str2가 커야한다</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">str1</span><span class="p">;</span>
    <span class="nx">str1</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">;</span>
    <span class="nx">str2</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nx">str2</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">let</span> <span class="nx">carryOut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">str1</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">str1Int</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">-</span> <span class="nx">diff</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">?</span> <span class="o">+</span><span class="nx">str1</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="nx">diff</span><span class="p">]</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">str1Int</span> <span class="o">+</span> <span class="o">+</span><span class="nx">str2</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">carryOut</span><span class="p">;</span>
    <span class="nx">carryOut</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span> <span class="o">%</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">carryOut</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">carryOut</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">gather</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">gather</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>제가 쓴 코드는 상당히 지저분한 코드입니다 ㅜㅜ..</p>

<p>저번에도 말했지만 <strong>간결할 수록 버그도 적어진다!!</strong></p>

<p>분명 줄일 수 있는, 간결해질 수 있는 방법이 있을 것이다. 함수화를 한다던가? 한번 찾아보고
코드를 줄이면 문서를 다시 수정하겠습니다!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-42/"> leetcode Trapping Rain Water 문제풀기 </a>
    </h1>

    <span class="post-date">25 Jan 2021</span>

    <p>#[leetcode][42] Trapping Rain Water 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/trapping-rain-water/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>내가 말이야.. 특이한 목욕탕을 만들고 싶거든.. 근데 물이 얼마나 필요할지 잘 모르겠어.. 니가 좀 구해줄래?</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/trapping-rain-water/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>대표적으로 이런 문제는 대부분 2 pointer 문제더라!!</p>

<p>일단 물 높이를 생각해봅시다!!. 인풋이 [2 ,0 ,0 ,3] 이렇게 주어지면, 왼쪽 기둥은 높이가 2, 오른쪽 기둥은 3 이다.
따라서 물을 다 채우면 왼쪽이 오른쪽 보다 낮기 때문에 높이 2까지만 채워집니다.</p>

<p>이 원리를 이용해 왼쪽에서 오른쪽 방향으로 하나씩 참고하는 포인터와 반대로 오른쪽에서 왼쪽 방향으로 참고하는 포인터를 생성합니다!.</p>

<p>만약 왼쪽에서 하나씩 보다가 현재 기둥이 오른쪽에서 참조하는 기둥의 높이보다 낮거나 같으면 한 칸 물을 채워주고, 반대로 오른쪽 기둥이 더 낮으면 오른쪽에서 물을 채워주는 형식으로 진행합니다. 채워주는 양은 현재 물의 높이 - 현재 기둥의 높이라고 생각하면 되겠습니다!. 물을 낮은 곳 부터 차근차근 채워나간다고 생각하면 편하겠군요.</p>

<p>왼쪽에서 먼저가던 오른쪽으로 가던 어느쪽으로 기준을 잡던 상관이 없지만 저는 왼쪽으로 기준 삼았습니다!.</p>

<h4 id="그래서-제가-어떻게-풀었냐면-">그래서 제가 어떻게 풀었냐면 !!</h4>

<p>물을 채울 때 높이가 가장 중요하다.
물의 높이는 왼쪽 기둥과 오른쪽 기둥의 높이를 비교하여 낮은 값과, 이때까지 물의 높이 중 더 큰 값을 선택하면 됩니다.
알아보기 쉽게 다음과 같이 표현했습니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">fixH</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">],</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">]));</span>
<span class="c1">// fixH가 물의 높이다.</span>
</code></pre></div></div>

<p>그런 다음 왼쪽 오른쪽 어디를 채울지 선택해 채우면 된다!!.!</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">trap</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">height</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">fixH</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixH</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">fixH</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">],</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">]));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">fixH</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">answer</span> <span class="o">+=</span> <span class="nx">fixH</span> <span class="o">-</span> <span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">];</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">answer</span> <span class="o">+=</span> <span class="nx">fixH</span> <span class="o">-</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">];</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>재미있다.</p>

<p>처음에 저는 상당히 긴 코드를 작성했었습니다. 제가 워낙 설계하지 않고 풀다보니 깔끔하게 풀지를 못해서 중간에 값을 변경하고 또 변경하다가 문제를 통과했습니다.</p>

<p>다른분들이 푼 아주 깔끔한 소스를 보고 약간의 자괴감이 드는 한편 또 깨닳음이 있었습니다.</p>

<p><strong>코드가 간결해 질수록 버그도 적어진다!!</strong></p>

<p>앞으로 간결하게 코드를 작성하도록 노력해야할 듯 합니다 !!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-40/"> leetcode  Combination Sum II 문제풀기 </a>
    </h1>

    <span class="post-date">22 Jan 2021</span>

    <p>#[leetcode][40] Combination Sum II 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/combination-sum-ii/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>숫자들을 줄게. 그 숫자들을 조합해서 내가 원하는 숫자가 나오는 조합을 찾아줘!</p>

<p>단, 그 찾은 조합끼리 중복이 있으면 안돼!! 그리고 특정 숫자를 내가 준 개수보다 더 많이 쓰면 안돼!!!!</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/combination-sum-ii/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>모든 경우를 다 체크해서 만들어진다? 그 결과가 중복되지 않는다? 그럼 push 한다.</p>

<p>라는 방법이 있지만, 이 방법으로는 이미 풀어봤기 때문에 다른 방법을 찾아봤다!</p>

<h4 id="그래서-제가-어떻게-풀었냐면-">그래서 제가 어떻게 풀었냐면 !!</h4>

<p>정답에 중복이 되는 이유는 같은 숫자들끼리 아무런 구별 없이 길을 만들어 지나왔기 때문!!</p>

<p>같은 숫자를 쓰는 길은 한 번만 지나가게 하면 된다.!!!! 뚜둔</p>

<p>예를 들어</p>

<p>[1, 2, 2 ,2 ,5] , 5 라는 값이 주어졌다 하면,</p>

<p>1, 2, 5 를 지나가는 길은 오직 한 번만 체크하면 된다.
두 번째 2도 체크하고, 세 번째 2도 체크 할 필요가 없다.</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">combinationSum2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidates</span><span class="p">,</span> <span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">candidates</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span> <span class="c1">// 오름차순</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="cm">/**
   * @param {number[]} candidates
   * @param {number[]} path
   * @param {number} start
   * @param {number} target
   */</span>
  <span class="kd">const</span> <span class="nx">dfs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">_target</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 다음 값도 체크해야한다!</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_target</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">answer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">start</span> <span class="o">&gt;</span> <span class="nx">_candidates</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]</span> <span class="o">===</span> <span class="nx">_candidates</span><span class="p">[</span><span class="nx">next</span><span class="p">])</span> <span class="nx">next</span><span class="o">++</span><span class="p">;</span>

    <span class="nx">dfs</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">_target</span><span class="p">);</span>

    <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]);</span>
    <span class="nx">dfs</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="p">[...</span><span class="nx">path</span><span class="p">],</span> <span class="nx">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">_target</span> <span class="o">-</span> <span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]);</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="nx">dfs</span><span class="p">(</span><span class="nx">candidates</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">target</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>재미있다.</p>

<p>다른 사람의 풀이 보는 것도 재미있다.
세상에는 천재는 넘치고 내 시간은 부족하다.</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nestjs/nestjs-2-CRUD/"> NestJS 블로그 만들기 - CRUD 로 시작하자. </a>
    </h1>

    <span class="post-date">21 Jan 2021</span>

    <h1 id="2-nestjs-블로그-만들기---crud-로-시작하자">2. NestJS 블로그 만들기 - CRUD 로 시작하자.</h1>

<hr />

<h2 id="-nestjs-블로그-만들기-시리즈의-목적">👌 NestJS 블로그 만들기 시리즈의 목적</h2>

<p>저는 <strong>NestJS 전문가</strong>가 아닙니다.
저 또한 NestJS 로 어플리케이션을 만들려고 한지 한달이 채 되지 않았습니다.</p>

<p>다만 제가 공부하면서 습득하고 이해한 내용을 바탕으로 간단한 어플리케이션을 만들며 기본적인 지식을
여러분께 같이 <strong>공유</strong>하는 것이 제 목적입니다.</p>

<p>대부분의 정보는 <strong>NestJS Doc</strong> , <strong>Github</strong> 를 참고하고 있습니다.</p>

<p>이 시리즈는</p>

<ul>
  <li>CRUD 기능</li>
  <li>Postgresql DataBase 연결</li>
  <li>Auth</li>
  <li>메시지 큐</li>
  <li>기타 기능 (카톡 공유, 카톡으로 로그인하기 등)</li>
</ul>

<p>의 내용을 다룰 것 입니다.</p>

<p>요구사항은 다음과 같습니다.</p>

<p><img class="post-image-center" src="/assets/img/nest_blog_requirement.png" width="70%" alt="requirement" /></p>

<p>지속적으로 업데이트 할 예정이니 제 <a href="https://github.com/Tocktock/nest-practice">Github repository</a>를 참고해주세요.</p>

<p>사용하는 IDE 는 <strong>VSCode</strong> 입니다.</p>

<blockquote>
  <p>이후 추가할 사항이나 유용한 팁이 있다면 더 추가하겠습니다.</p>
</blockquote>

<p>궁금한 사항이나 제가 틀렸다고 생각하는 부분이 있다면 언제든 피드백 해주세요.</p>

<hr />

<h2 id="-nestjs-어플리케이션-시작하기">🛴 NestJS 어플리케이션 시작하기.</h2>

<p>NestJS 는 Javascript 기반 Typescript 언어를 주로 다룹니다.
Javascript 환경을 위해서 Node.js 가 설치되어 있는지 먼저 확인해주세요.</p>

<blockquote>
  <p><a href="https://nodejs.org/en/">Node.js 설치하기</a></p>
</blockquote>

<p>NestJS 설치를 위해 다음 명령어를 터미널에서 실행해주세요.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm i -g @nestjs/cli
</code></pre></div></div>

<p>설치가 정상적으로 되었다면 이제 프로젝트 폴더를 만들어 봅시다. project-name 은 원하시는데로 하면 됩니다.
저희는 nestjs-practice 라고 지어보죠.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nest new nestjs-practice
</code></pre></div></div>

<p>패키지 매니저는 npm 을 사용하겠습니다. (그대로 엔터 눌러주면 됩니다.)</p>

<h2 id="구조-살펴보기">👓구조 살펴보기</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src
  app.controller.spec.ts
  app.controller.ts
  app.module.ts
  app.service.ts
  main.ts
</code></pre></div></div>

<p>src 폴더에는 앱의 코드들이 모여있다고 생각하시면 됩니다.
각 역할을 보자면</p>

<ul>
  <li>app.controller.<strong>spec</strong>.ts : spec 이 붙은 파일들은 <strong>테스트 파일</strong>입니다. 지금은 무시하셔도 됩니다.</li>
  <li>app.<strong>controller</strong>.ts : 앱의 request 와 response 를 담당하는 <strong>라우팅</strong> 관련 파일입니다.</li>
  <li>app.<strong>module</strong>.ts : 앱을 구성하는 <strong>구조</strong>의 메타데이터를 담당하는 파일입니다.</li>
  <li>app.<strong>service</strong>.ts : 앱의 <strong>비지니스 로직</strong>을 담당하는 파일입니다.</li>
</ul>

<p>앞으로 모든 앱의 구성요소들은 위와 같은 형태로 만들어질거에요!!</p>

<p>최상의 폴더의 다른 파일들은 구성 요소를 담당하는 녀석이에요.
예를 들면 typescript 환경설정 파일 또는 패키지 의존성 관리파일 같은 것들이에요.!!</p>

<h2 id="기능-만들어보기">🔨기능 만들어보기</h2>

<p><strong>nest cli</strong> 는 정말 유용한 기능들을 많이 지원합니다.
<strong>nest generate</strong> 기능을 이용하면 자주 사용하는 용도의 템플릿을 생성할 수 있습니다.
다음은 <strong>nest generate | g</strong> 를 이용해 만들 수 있는 명령어들입니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ┌───────────────┬─────────────┬──────────────────────────────────────────────┐
  │ name          │ alias       │ description                                  │
  │ application   │ application │ Generate a new application workspace         │
  │ class         │ cl          │ Generate a new class                         │
  │ configuration │ config      │ Generate a CLI configuration file            │
  │ controller    │ co          │ Generate a controller declaration            │
  │ decorator     │ d           │ Generate a custom decorator                  │
  │ filter        │ f           │ Generate a filter declaration                │
  │ gateway       │ ga          │ Generate a gateway declaration               │
  │ guard         │ gu          │ Generate a guard declaration                 │
  │ interceptor   │ in          │ Generate an interceptor declaration          │
  │ interface     │ interface   │ Generate an interface                        │
  │ middleware    │ mi          │ Generate a middleware declaration            │
  │ module        │ mo          │ Generate a module declaration                │
  │ pipe          │ pi          │ Generate a pipe declaration                  │
  │ provider      │ pr          │ Generate a provider declaration              │
  │ resolver      │ r           │ Generate a GraphQL resolver declaration      │
  │ service       │ s           │ Generate a service declaration               │
  │ library       │ lib         │ Generate a new library within a monorepo     │
  │ sub-app       │ app         │ Generate a new application within a monorepo │
  │ resource      │ res         │ Generate a new CRUD resource                 │
  └───────────────┴─────────────┴──────────────────────────────────────────────┘
</code></pre></div></div>

<p>예들 들면</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nest g module catiscute
</code></pre></div></div>

<p>위 명령어는 catiscute 라는 모듈을 자동으로 생성해줍니다. 어때요 정말 유용하죠? !!</p>

<p>자아아아 저기 저기 <strong>CRUD</strong> 보이시나요? <strong>resource</strong> 라는 명령어를 이용하시면 CRUD 에 필요한 템플릿을 얻을 수 있습니다.!!!!!
우후 ~ 박수박수 진짜 어메이징 합니다. 여러분 이 명령어로 바로 템플릿 얻는 거는 진짜 놀라운거에요!!</p>

<p>이제 users 라는 CRUD 기능을 만들어보죠.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nest g res users
</code></pre></div></div>

<p>를 입력해봅시다. 와우 폴더 보이시나요?? !! 보이시나요!!!
한 가지 더 말하자면 <strong>app.module.ts</strong> 파일에 자동으로 <strong>UsersModule</strong> 이 추가되었습니다.!!!
와 <strong>미쳐따 미쳐따</strong>… 진짜 편리하다 … 🙀</p>

<p>우리는 이제 유저에 관한 기본적인 CRUD 기능을 수행할 수 있습니다. 우후~</p>

<p>한 번 앱을 실행해볼까요??</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run start
</code></pre></div></div>

<p>어랏 ?!?!? 저는 이런 에러가 떳습니다. nest 가 생성해준 파일에 우리가 설치하지 않은 node 모듈이 있나보네요!!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 import { PartialType } from '@nestjs/mapped-types';
                              ~~~~~~~~~~~~~~~~~~~~~~
</code></pre></div></div>

<p>다음 명령어를 통해 설치해주자구요!!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install @nestjs/mapped-types --save
</code></pre></div></div>

<p>설치가 되면 다시</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run start
</code></pre></div></div>

<p>유후~ 이번엔 에러가 없습니다!!!!! 로그를 보시면</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [NestFactory] Starting Nest application...
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [InstanceLoader] AppModule dependencies initialized +24ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [InstanceLoader] UsersModule dependencies initialized +2ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RoutesResolver] AppController {}: +8ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {, GET} route +4ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RoutesResolver] UsersController {/users}: +1ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {/users, POST} route +0ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {/users, GET} route +9ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {/users/:id, GET} route +0ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {/users/:id, PUT} route +1ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [RouterExplorer] Mapped {/users/:id, DELETE} route +0ms
[Nest] 35604   - 2021-01-22 11:31:13 ├F10: AM┤   [NestApplication] Nest application successfully started +2ms
</code></pre></div></div>

<p><strong>RouteExplorer</strong> 를 보시면 <strong>users</strong> 에 관련된 매핑들을 볼 수 있습니다!!</p>

<p>이제 편하신 브라우저를 키시고 <a href="http://localhost:3000">http://localhost:3000</a> 로 접속하시면!!</p>

<blockquote>
  <p>아무런 설정 안하셨으면 앱의 기본 포트는 3000 입니다!!</p>
</blockquote>

<p><strong>Hello World!</strong>
사실 이 페이지를 보는게 목적이 아니기 때문에 링크 뒤에 /users 를 입력해봅시다</p>

<p>가보자구요!! <a href="http://localhost:3000/users">http://localhost:3000/users</a>
<strong>This action returns all users</strong></p>

<p>가보자구요!! <a href="http://localhost:3000/users/1">http://localhost:3000/users/1</a>
<strong>This action returns a #1 user</strong></p>

<p>모야모야~ 벌써 된거야? 우리 뭐 한것도 없는데??</p>

<p>nest 정말 편한 기능들이 많습니다. 다만 우리가 원하는건 단순히 저런 문자가 아니라 진짜 유저 정보겠죠?</p>

<p>다음 시간에는 데이터베이스에 연결해서 진짜 유저 정보를 만들고 가져오고 수정하고 삭제하고를 배워보겠습니다.</p>

<h2 id="-좀-더-살펴보기">🔨 좀 더 살펴보기</h2>

<p>자 근데 우리 여기서 마치면 좀 찝찝하잖아요? 그러셔야 합니다. 그럴거에요. 그래서 준비했습니다!!</p>

<p>코드와 구조를 조금 더 살펴보겠습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>users
    │  users.controller.spec.ts
    │  users.controller.ts
    │  users.module.ts
    │  users.service.spec.ts
    │  users.service.ts
    │
    ├─dto
    │      create-user.dto.ts
    │      update-user.dto.ts
    │
    └─entities
            user.entity.ts
</code></pre></div></div>

<p><strong>spec</strong> 이 붙은 파일은 <strong>테스트 파일</strong>입니다. 다음에 테스트 할 때 살펴보겠습니다!</p>

<p>dto 에 관한 내용과 entities 에 관한 내용은 다음번에 데이터베이스 연결하고 알아보겠습니다.</p>

<p>그럼 service, controller, module 에 대해서 한번 살펴보죠.</p>

<h4 id="service">🍔Service</h4>

<p><strong>Service</strong> 파일은 비지니스 로직을 처리하는 파일이라고 했습니다. <strong>UserService</strong> 클래스 안을 살펴 보시면
create, findAll, findOne, update, remove 함수들이 있습니다.
여기서 리턴하는 문자열이 우리가 브라우저에서 본 문자들이죠?</p>

<p>그리고 클래스 위에 <strong>@Injectable()</strong> 이라는 <strong>Decorator</strong> 가 있습니다.</p>

<blockquote>
  <p>Decorator 는 기능을 확장할 때 쓰일 수 있는 디자인 패턴입니다.
<a href="https://www.typescriptlang.org/docs/handbook/decorators.html">데코레이터 패턴이 뭔가요?</a></p>
</blockquote>

<p>Injectable 데코레이터는 다른 클래스에 <strong>constructor</strong> 를 통해 이 클래스를 Inject 하기 위한 데코레이터로 <strong>DI(Dependency Injection)</strong> 기능을 사용하기 위해 쓰입니다.</p>

<p>Controller 파일을 보면 더 이해가 잘 될겁니다!</p>

<h4 id="controller">🌭Controller</h4>

<p><strong>Controller</strong> 파일은 <strong>라우팅</strong>을 처리하는 파일입니다.
일단 UsersController 클래스 안에 constructor 를 보시면. <strong>userService</strong> 의 <strong>타입만 지정</strong>했습니다.</p>

<p>그럼에도 불구하고 create 함수에서 이 <strong>this.userService.create 를 호출</strong>하고 있는데요.</p>

<p>이게 어떻게 가능한 것이냐면 바로 <strong>Nest 의 훌륭한 DI 시스템</strong> 때문입니다.</p>

<blockquote>
  <p>DI 는 간단하게 NestJS 의 틀에 맞게 우리가 어떤 값을 지정해주면 NestJS 가 알아서 컨트롤 해주는 기능입니다.우리 UserService 부분에서 Injectable 데코레이터를 통해 UserService 를 Injectable 한 provider 로 지정했습니다.따라서 UserController 클래스 내의 constructor 에서 단순히 userService 의 타입을 UserService 로 지정해줌으로서NestJS가 알아서 this.userService 의 <strong>생성과 소멸을 관리</strong>하게 됩니다.</p>
</blockquote>

<p>와 미쳐따 미쳐따!!! 정말 편하다!!</p>

<p>아직 몇 가지 더 봐야할 것이 있습니다.</p>

<p>바로 <strong>@Controller</strong> 데코레이터 입니다. 데코레이터에서 “users” 라고 지정해주고 있습니다. 이 말은 바로!</p>

<p><strong>/users 라는 주소로 요청이 들어오면 이 클래스에서 처리하겠다</strong></p>

<p>라는 뜻입니다. 우리는 UserController 를 app 모듈에 갔다 붙였으니 주소는 localhost:3000/users 가 되겠죠??.</p>

<p>이후 UsersController 내의 함수를 보면</p>

<p>@Post, @Get, @Put, @Delete 데코레이터들이 보입니다.</p>

<p>이름에서도 유추할 수 있듯이 <strong>/users 에 해당하는 메서드로 들어오면 이 함수에서 처리하겠다.</strong> 라는 뜻 입니다.</p>

<p>users 이후 매핑도 지정할 수 있는데요.
@Get(“:id”) 라는 데코레이터는 <strong>/users/:id 로 들어온 요청을 이 함수에서 처리하겟다</strong> 라는 뜻 입니다.</p>

<p>정말 직관적이죠?? 우후~</p>

<blockquote>
  <p><strong>’:’</strong> 로 시작하는 문자열은 파라메터라는 값으로 인식하겠다는 뜻입니다.
findOne 을 보시면 함수 인자 값에 @Param(‘id’) 이라는 데코레이터를 붙여 :id 위치의 값을 id 라는 값에 할당하는 과정을 볼 수 있습니다.</p>
</blockquote>

<p>또한 비슷하게 <strong>@Body</strong> 데코레이터는 request body 의 내용을 변수에 할당하겠다는 뜻 입니다.</p>

<p>정말 쉽다쉽다!!</p>

<h4 id="module">🥣Module</h4>

<p>UsersModule 클래스는 이 users 라는 폴더 안의 <strong>모듈을 관리</strong>하는 클래스입니다.
이 모듈의 <strong>controllers</strong> 는 UsersController 클래스를 통해 관리하겠다!
이 모듈의 <strong>providers</strong> 는 UserService 클래스를 통해 관리하겠다 !!</p>

<blockquote>
  <p>잘 보시면 배열의 값이므로 복수의 값을 할당할 수 있습니다!!</p>
</blockquote>

<p>이 UsersModule 을 app 모듈에서 imports 하고 있기 때문에 app 이 UserModule 을 인식할 수 있던 것 입니다!!</p>

<p>다른 값에 대해서는 이후 포스트에서 다루겠습니다.</p>

<hr />

<p>자 여러분 정말 쉽고 직관적으로 되어있지 않나요? 제가 NestJS 를 좋아하게 된 이유 이기도 합니다.!!</p>

<p>다음에는 Postgresql 데이터베이스를 이용해 진짜 user 정보를 저장해보자구요!</p>

<p>피드백은 항상 환영입니다!!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/elasticsearch/elasticsearch-type/"> Elasticsearch 타입에 대해서 알아보자! </a>
    </h1>

    <span class="post-date">20 Jan 2021</span>

    <p>#[🌎elasticsearch] Elasticsearch 타입에 대해서 알아보자!</p>

<hr />

<ul>
  <li>
    <p><a href="https://esbook.kimjmin.net/">Elasticsearch 가이드북 ✈</a></p>
  </li>
  <li>
    <p><a href="https://www.elastic.co/kr/what-is/elasticsearch">Elasticsearch 홈페이지 가기 ✈</a></p>
  </li>
</ul>

<hr />

<p>ElasticSearch 의 다양한 기능들을 둘러보기 전 꼭 알아야 할 타입들에 대해서 알아보겠습니다.!!
진짜 진짜 진짜 중요하니 꼭 커피 스윽 마시고 읽어주세요!!</p>

<h2 id="-mapping">🍔 Mapping</h2>

<p>Mapping 어떻게 ElasticSearch 의 문서들이 저장되고 색인 되었는지에 대한 정의입니다.
이 Mapping 의 정의를 통해 불필요한 프로세스 들과 공간 낭비를 줄이고 필요한 기능을 사용할 수 있습니다.
예를 들면,</p>

<ul>
  <li>어떤 필드들이 Full-Text-Search 의 대상이 되어야 하는가?</li>
  <li>어떤 필드들이 숫자, 날짜, 위치 정보를 포함하는가?</li>
</ul>

<p>또한 이후 포스트에서 Dynamic Mapping 을 다룰 때에도 Mapping 과 타입에 대한 기본 개념이 필요합니다.</p>

<h2 id="-field-data-type">🍟 Field Data Type</h2>

<p>먼저 이번 포스트에서는 Metadata Fields 가 아닌 Properties 에 대한 Field Type 다룹니다.</p>

<blockquote>
  <p>Metadata Fields 는 “_index”, “_id”, “_source” 와 같이 metadata 와 관련된 녀석들입니다!</p>
</blockquote>

<p>먼저 중요한 녀석들을 뽑자면,</p>

<ul>
  <li>Text</li>
  <li>Keyword</li>
  <li>Numbers</li>
  <li>Date</li>
  <li>Object</li>
</ul>

<p>그 외에</p>

<ul>
  <li>Nested</li>
</ul>

<p>등이 있습니다.</p>

<blockquote>
  <p>더 자세한 내용은 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html#structured-data-types">👆엘라스틱 홈페이지 참고하기!!</a></p>
</blockquote>

<h2 id="keyword--text">🍕Keyword &amp; Text</h2>

<p>요 두 녀석은 정말 중요합니다.</p>

<ul>
  <li><strong>keyword</strong> 는 exact search, sorting, aggregations 등을 위한 녀석입니다. 예를 들면 Id, Email, Tag 등을 검색할 때 유용합니다.</li>
  <li><strong>text</strong> 는 Full-Text-Search 기능을 위한 녀석입니다. 우리가 검색하려는 단어와 최대한 관련된 검색을 위해 사용하는 놈 입니다!</li>
</ul>

<p>기본적으로 우리가 어떤 필드 타입을 지정해주지 않고 문자열 데이터를 넣게 되면 (지정 안해도 가능합니다.)
ElasticSearch 는 이 필드가 어떤 용도로 사용될 지 알 방법이 없기 때문에 keyword 와 text 타입을 같이 지정해주어 색인과정을 진행하게 됩니다.</p>

<p>keyword 와 text 의 두 기능이 모두 필요하다면 keyword 와 text 타입을 같이 지정해주는 것이 정말 유용합니다.</p>

<p>하지만 예를 들어봅시다.
문서의 작성자를 검색을 하고 싶습니다. 작성자를 Email 이라고 합시다.
우리가 검색할 단어와 Email 이 비슷한지는 상관관계를 따질 필요가 없습니다.
오직 keyword 타입의 필드만 있으면 되겠죠.</p>

<p>그럼 Email 필드에 text 타입은 불필요한 타입이고, 이는 disk 공간을 낭비하게 됩니다.
만약 문서가 수백만 수천만개가 넘어간다면 이는 무시할 수 없는 공간일 것 입니다.</p>

<p>이는 반대도 마찬가지 입니다.</p>

<p>필드에 필요한 Type 만 지정하는 것은 결국 disk 비용을 줄이는 결과를 가져오겠죠??
비용은 매우 중요하니까 꼭 필요한 만큼만 씁시다!!</p>

<h2 id="-numbers">🥞 Numbers</h2>

<p>숫자 또한 중요하지만 알아야 할 개념은 많지 않습니다.
만약 JSON 형식의 데이터가 날라와 저장하는데 정수 형식이다 그러면 Long 타입으로,
실수 형식이다 그러면 Double 타입으로 자동으로 매핑됩니다.</p>

<p>자 여기서 질문. 왜 Long 이고, Double 일까?</p>

<p>ElasticSearch 는 지정되지 않은 타입에 대해서 정보가 없습니다.</p>

<p>다시말해 정수가 저장되면 이 정수의 범위가 어떻게 될지에 대해서 알 수 없습니다.
그렇기 때문에 Interger 가 아니라 더 큰 수를 담을 수 있는 Long 타입에 매핑하는 것 입니다.
Double 또한 마찬가지 입니다.</p>

<p>하지만 무조건 Long, Double 타입을 사용하는건 좋지 않습니다.
이전에 이미 말했지만 비용은 매우 중요합니다. Integer 의 범위면 충분한데 Long 을 사용하는 것은 disk 공간을 낭비하는 행동이겠죠?</p>

<p>만약 정확하게 특정 필드가 다룰 숫자의 범위를 안다면 그에 맞게 사용하시는 것이 좋습니다.</p>

<h2 id="-date">🍗 Date</h2>

<p>JSON 형식의 데이터에는 이 필드는 date 타입이다!! 라고 알려주는 지표가 없습니다.
우리가 JSON 형식으로 데이터를 주고 받을텐데.. ElasticSearch 는 이걸 어떻게 알까요?</p>

<p>ElasticSearch 는 매우 유용한 기능을 가지고 있습니다.</p>

<p>이 필드가 Date 타입인지 아닌지 <strong>유추</strong>하는 것이죠</p>

<p>문자열 필드이며, Date 정보를 포함하고 있다면 예들들어 다음과 같은 형식이라면</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ "date": "2015-01-01" }
{ "date": "2015-01-01T12:10:30Z" }
</code></pre></div></div>

<p>ElasticSearch 는 아!! 이 필드는 Date 타입이구나! 라고 추론하게 됩니다.</p>

<p>물론 이 형식은 아래와 같이 형식을 정할 수 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mappings": {
    "properties": {
        "date": {
            "type":   "date",
            "format": "yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis"
        }
    }
}
</code></pre></div></div>

<p>아직 mapping 하는 법을 배우진 않았지만 format 형식을 보면서 아 이런 식으로 지정 가능하구나 라고 아시면 될 것 같습니다.</p>

<p>또한 미리 지정한다면 Interger, Long 타입을 Date 필드로 표현이 가능도 합니다.</p>

<ul>
  <li>Integer 타입은 1970년 1월 1일 부터 초를 단위로 계산한 값입니다.</li>
  <li>Long 타입은 1970년 1월 1일부터 밀리초를 단위로 계산한 값입니다.</li>
</ul>

<h2 id="-object">☕ Object</h2>

<p>JSON 의 데이터 형식은 Object 라고 보시면 됩니다.
계층적으로 내부 Object 를 다시 포함하게 되죠.</p>

<p>ElasticSearch 에서는 사실 Object 라는 타입이 애매모호합니다.</p>

<p>예를 들어</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "region": "US",
    "manager": {
        "age":     30,
        "name": {
        "first": "John",
        "last":  "Smith"
        }
    }
}
</code></pre></div></div>

<p>이런 데이터가 있다면 ElasticSearch 는 내부적으로</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "region":             "US",
    "manager.age":        30,
    "manager.name.first": "John",
    "manager.name.last":  "Smith"
}
</code></pre></div></div>

<p>점을 통해 저장합니다. 따라서 내부적으로 본다면, “Object 라는 타입은 없다.” 라고도 할 수 있겠네요.</p>

<h2 id="-nested">🥧 Nested</h2>

<p>Nested 타입은 배열과 관련이 있습니다.
더 자세하게 말하면 Object 의 배열을 색인 하기 위한 특수 타입이라고 보시면 되겠네요.</p>

<p>이전에 말했던 것 처럼ElasticSearch 내부적으로는 Object 라는 타입이 없다. 라고 말씀드렸는데요.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "group" : "fans",
        "user" : [
            {
            "first" : "John",
            "last" :  "Smith"
            },
            {
            "first" : "Alice",
            "last" :  "White"
            }
        ]
}
</code></pre></div></div>

<p>이와 같은 타입은 어떻게 저장되어야 할까요? user.first 는 여러개 있으니 배열로 저장해야 할 것입니다.
다음과 같이요.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "group" :        "fans",
    "user.first" : [ "alice", "john" ],
    "user.last" :  [ "smith", "white" ]
}
</code></pre></div></div>

<p>이렇게 저장되면 alice white 라는 이름과 john smith 이름의 연관성은 사라지게 됩니다.</p>

<p>순수히 user.first 에 “alice”, “john” 이 저장되었고
마찬기자로 user.last 에 “smith”, “white” 이 저장되었기 때문이죠.</p>

<p>다시말해 smith 라고 검색한다면 alice 가 튀어나올 수도 있는 상황이라는 겁니다.</p>

<p>이를 해결하기 위해 Nested 라는 타입을 지정할 수 있습니다.
Nested 를 사용하게 되면 ElasticSearch 는 배열을 내부적으로 숨겨진 문서에 해당 내용을 따로 저장하게 됩니다.</p>

<p>만약 user 가 11명이라면, 11개의 숨겨진 user 문서와 1개의 본 문서가 저장되겠네요.</p>

<p>문서가 늘어난다는 것은 검색 비용이 늘어난다는 말입니다.
유의해서 써라… 이 말이죠.</p>

<h2 id="-끝-입니다">😂 끝 입니다!!</h2>

<p>끝이라 적고 한가지만 더 말씀드리자면..
이 Mapping 을 통해 데이터 타입을 정하고 인덱스를 만들었습니다.
그리고 엄청난 양의 데이터를 만들고 나니 데이터의 타입을 변경해야할 상황이 오게 되면…</p>

<p>인덱스를 삭제하고 다시 만드는 Reindex 과정이 필요합니다… 그러니 반드시.. 심사숙고해서.. 만드세요..</p>

<hr />

<p>짞짞짞 고생 많으셨습니다.!! 잠시 눈 운동하고 쉬고 계세요!!</p>

<p>다음에는 또 어려운 내용으로 찾아뵐게요.. 흑흐구 ㅜㅜ 공부할 수록 알아야할 내용이 많습니다.</p>

    <hr />
  </div>
  
</div>

<div class="pagination">
  
  <a
    class="pagination-item older"
    href="https://tocktock.github.io/page3"
    >Older</a
  >
    
  <a class="pagination-item newer" href="https://tocktock.github.io/">Newer</a>
   
</div>
</div>
  
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src="/public/js/script.js"></script>
  </body>
</html>
