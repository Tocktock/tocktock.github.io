<!DOCTYPE html>
<html lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     영원 &middot; 웹 개발과 일상
    
  </title>

  
  <link rel="canonical" href="https://tocktock.github.io/page2/" />
  

  <link rel="stylesheet" href="https://tocktock.github.io/public/css/poole.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/syntax.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/lanyon.css" />

  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400"
  />

  <link
    rel="apple-touch-icon-precomposed"
    sizes="144x144"
    href="https://tocktock.github.io/public/apple-touch-icon-precomposed.png"
  />
  <link rel="shortcut icon" href="https://tocktock.github.io/public/favicon.ico" />

  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://tocktock.github.io/atom.xml"
  />

  <!-- <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "//www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-178749172-1", "auto");
    ga("send", "pageview");
  </script> -->
</head>


  <body>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" />

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item description">
    <p>Developer with Cat</p>
  </div>

  <nav class="sidebar-nav">
    <a
      class="sidebar-nav-item active"
      href="https://tocktock.github.io/"
      >Home</a
    >
                
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/about/"
        >About me</a
      >
                 
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/categories/"
        >Categories</a
      >
      
      <ul class="sidebar-categories">
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Algorithms"
            >Algorithms (28)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Jekyll"
            >Jekyll (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/elasticsearch"
            >elasticsearch (9)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/NestJS"
            >NestJS (4)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/DevTip"
            >DevTip (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/nodejs"
            >nodejs (1)</a
          >
        </li>
        
      </ul>
                                                                   
    </div>

    <a class="sidebar-nav-item" href="https://github.com/Tocktock/tocktock.github.io">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span>
  </nav>

  <div class="sidebar-item">
    <p>&copy; 2021. All rights reserved.</p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">영원</a>
            <small>웹 개발과 일상</small>
          </h3>
        </div>
      </div>

      <div class="container content"><div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/elasticsearch/elasticsearch-search-query/"> Elasticsearch search query 집중탐구 - 1 </a>
    </h1>

    <span class="post-date">26 Jan 2021</span>

    <p>#[🌎elasticsearch] search query 집중탐구 - 1 전처리 과정</p>

<hr />

<ul>
  <li>
    <p><a href="https://esbook.kimjmin.net/">Elasticsearch 가이드북 ✈</a></p>
  </li>
  <li>
    <p><a href="https://www.elastic.co/kr/what-is/elasticsearch">Elasticsearch 홈페이지 가기 ✈</a></p>
  </li>
</ul>

<hr />

<h2 id="-elasitcsearch-full-text-search-의-원리">🧡 ElasitcSearch Full-Text-Search 의 원리</h2>

<h3 id="inverted-index">🙂Inverted Index</h3>

<p>Elasticsearch 는 “text” 로 매핑된 필드의 경우 그 안에 데이터를 Inverted Index 라는 구조로 저장합니다.</p>

<p>직역하자면 역 색인, 반대 색인 이런 뜻인데 대충 감이 오시나요??</p>

<p>예들 들어보겠습니다.
아래와 같은 데이터가 있다고 합시다.</p>

<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>“Cat is Cute”</td>
    </tr>
    <tr>
      <td>2</td>
      <td>“Dog is Cute Too”</td>
    </tr>
    <tr>
      <td>3</td>
      <td>“Cat is lazy”</td>
    </tr>
    <tr>
      <td>4</td>
      <td>“Dog is super athletic”</td>
    </tr>
  </tbody>
</table>

<p>일반적인 DBMS 에서는 <strong>“athletic”</strong> 을 검색하고 싶다하면 1번 ,2번, 3번, 4번 순서로 검색해서
<strong>“athleti”</strong> 이 있구나 Id 4를 보여줘야지. 라고 할 겁니다.</p>

<p>Inverted Index 는 조금 다릅니다.
토큰마다 값을 가지는데, 이 값은 “이 문서에 이 토큰 값이 포함되어 있어.”를 저장합니다.
위의 테이블을 아래와 같은 식으로 저장합니다.</p>

<table>
  <thead>
    <tr>
      <th>Token</th>
      <th>Id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>“cat”</td>
      <td>1, 3</td>
    </tr>
    <tr>
      <td>“dog”</td>
      <td>2, 4</td>
    </tr>
    <tr>
      <td>“cute”</td>
      <td>1, 2</td>
    </tr>
    <tr>
      <td>“lazy”</td>
      <td>3</td>
    </tr>
    <tr>
      <td>“athletic”</td>
      <td>4</td>
    </tr>
    <tr>
      <td>“super”</td>
      <td>4</td>
    </tr>
  </tbody>
</table>

<p>이 같은 경우 “athletic” 토큰이 포함된 4번 문서만 보면 됩니다. 다만 토큰을 빨리 찾기 위해 저장하는 자료구조는 좀 복잡해질겁니다.
괜찮습니다. <strong>Elasticsearch 가 대신해줄거거든요!!</strong></p>

<p>🛑🛑 단 이렇게 저장되는 건 오직 필드가 <strong>text</strong> 타입일 때만 적용됩니다.
다른말로 하자면 text 필드가 아니면 전문검색 기능을 쓸 수 없습니다!!</p>

<h3 id="analizer">🙂Analizer</h3>

<p>위의 예시에서 눈치채신 분도 계시겠지만, 처음 테이블의 내용을 Inverted Index 방법으로 저장할 때 전부 소문자로 바뀌어서 저장이 되었습니다.
그리고 저장되지 않은 단어들도 있군요. 이 과정을 <strong>Text Analysis</strong> 라고 합니다.
이 과정을 거치지 않고 진행하게 되면 검색에 필요 없는단어 가령 “is”, “too” 까지 저장해야합니다.</p>

<p>우리가 “dOG” 라고 검색해도 “Dog” 가 포함된 문서를 보고 싶다면 토큰화하는 과정에 전처리 과정을 수행해야합니다.</p>

<h4 id="1-character-filter">1. Character Filter</h4>

<p><strong>Character Filter</strong> 는 전처리과정에서 가장 먼저 수행되는 과정입니다.
<strong>Character Filter</strong> 에는 <strong>HTML Strip, Mapping, Pattern Replace</strong> 세 가지가 존재합니다.</p>

<ul>
  <li><strong>HTML Strip</strong> : 문장에 HTML 태그들을 없애주는 Filter 입니다. 예를들면,
<code class="language-plaintext highlighter-rouge">&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;</code> 라는 문장을 <code class="language-plaintext highlighter-rouge">I'm so happy!</code> 로 바꿔줍니다.</li>
  <li><strong>Mapping</strong> : 특정 문자열을 내가 원하는 값으로 대체할 수 있습니다.</li>
  <li><strong>Pattern Replace</strong> : 특정 정규식 패턴을 내가 원하는 값으로 대체할 수 있습니다.</li>
</ul>

<h4 id="2-tokenizer-filter">2. Tokenizer Filter</h4>

<p><strong>Tokenizer Filter</strong> 는 문자열을 받아 단어들을 토큰화하는 과정입니다.
Tokenizer Filter 는 많은 종류가 있는데 대표적인 3가지를 먼저 알아보겠습니다.</p>

<ul>
  <li><strong>Standard</strong> : 토큰화 할 때 <strong>공백과 hyphen(-)을</strong> 기준으로 토큰화를 수행하며, 일부 특수문자를 제거합니다.</li>
  <li><strong>Letter</strong> : 토큰화 할 때 <strong>문자열 이외</strong>를 기준으로 토큰화를 수행합니다.
예들 들어 <code class="language-plaintext highlighter-rouge">Brown-Foxes dog's</code> 같은 문자열은 [Brown, Foxes, dog, s] 로 토큰화를 수행합니다.</li>
  <li><strong>Whitespace</strong> : <strong>공백</strong> 을 기준으로 토큰화를 수행합니다. 공백, 줄바꿈, 탭 모든 공백을 포함합니다.</li>
</ul>

<blockquote>
  <p>Email, URL, Path 와 특수 목적용 Tokenizer 들이 많으니 자세한 정보는 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html">Tokenizer Document</a> 를 참조해주시와요.!!</p>
</blockquote>

<h4 id="3-token-filter">3. Token Filter</h4>

<p><strong>Token Filter</strong> 는 각 Tokenizer Filter 에 의해 만들어진 Token 들에 대한 후처리 작업을 수행합니다.
가장 대표적인 Lowercase Token Filterr 로 Stop Token Filterr 가 있습니다.</p>

<ul>
  <li><strong>Lowercase</strong> : 말 그대로 토큰들을 소문자로 <strong>바꾸는</strong> Token filter 입니다.</li>
  <li><strong>Stop</strong> : Search 기능에 필요 없는 단어들 예를 들면 is, be, to, a, as 등을 없애는 필터입니다.</li>
</ul>

<blockquote>
  <p>더 많은 Token filter 를 보고 싶으면 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/analysis-tokenfilters.html">Token Filters</a> 를 참조해주세요!! 오른쪽 메뉴바에 다양한 Token filters 가 있습니다.</p>
</blockquote>

<h4 id="4-stemming">4. Stemming</h4>

<p>또한 각 토큰들은 그 원형을 유지할 필요가 있습니다. 예를 들면 <code class="language-plaintext highlighter-rouge">working</code> 에서 <code class="language-plaintext highlighter-rouge">ing</code> 는 필요 없는 부분이며 우리는 work 만 검색하면 됩니다.
이러한 과정을 Stemming 이라고 합니다.</p>

<h4 id="etc">ETC</h4>

<p>우리가 문서에 영어만 쓰는 것은 아닙니다. 대부분 그 나라에서는 그 나라 언어를 많이 쓸 것입니다.
ElasticSearch 에 내장된 언어분석기가 없다면, Full-Text-Search 에 난항을 겪을지도 모릅니다.
다행이도 한글의 경우는 Nori 한글 형태소 분석기를 이용하여 이 과정을 수행합니다.</p>

<blockquote>
  <p>자세한 내용은 Elasticsearch Document 를 참고해주세요!! <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/analysis-nori.html">Nori Analysis Plugin 구경하기</a></p>
</blockquote>

<hr />

<p>위 과정을 통해 저장된 토큰들을 통해 Search API 기능들을 수행합니다.</p>

<p>다음에는 query 를 통해 실제 예제로 찾아뵙겠습니다.</p>

<p>피드백은 항상 환영입니다.</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/devtip/develop-knowledge-uuid/"> DevTip - UUID vs Auto Increment </a>
    </h1>

    <span class="post-date">25 Jan 2021</span>

    <p>#[DevTip] UUID vs Auto Increment</p>

<h2 id="-uuid-가-뭐죠">👓 UUID 가 뭐죠</h2>

<p>UUID 는 간단하게 범용 고유 식별자라고 생각하면 편할것 같습니다.</p>

<p>예를 들어 내가 뭔가 만들 때마다 식별할 수 있는 고유값을 만들고 싶다면 사용하면 됩니다.</p>

<p>문서를 만들고 문서의 고유 식별자를 만들 때도,
회원가입을 하고 유저의 고유 식별자를 만들 때도</p>

<p>UUID 를 만드는 함수 하나 가져와서 그냥 쓰면 만사 ok.</p>

<p>물론 UUID 는 <strong>유일을 보장</strong> 한다는 것은 아닙니다.. UUID 는 <strong>실질적으로 유일함</strong> 을 목적으로 하고 있고 실제로 대부분의 상황에서 그러합니다.</p>

<p>이게 가능한 이유가 UUID 는 16 바이트의 문자로 이루어집니다. 비교해보자면 c 언어에서 integer 타입은 대략 -21억 ~ 21억 사이로 표현이 가능합니다.
반면 UUID 는 10의 38승까지, 정확히 <strong>340,282,366,920,938,463,463,374,607,431,768,211,456</strong> 개가 생성 가능합니다.</p>

<p>감이오시쥬~??</p>

<h2 id="-auto-increment-primary-keys-">👓 Auto increment primary keys ??</h2>

<p>Auto increment primary key 는 프로그램적으로 문제가 없는 한, <strong>유일을 보장</strong> 합니다.</p>

<blockquote>
  <p>다만 너무 많은 id가 생성되면 아닐 보장하지 않을 수도 있습니다. 하지만 우리는 40억개 이상 생성하지 않을꺼야!! 라고 생각하고… 또한 키를 Integer 가 아니라 더 큰 타입으로도 생성할 수 있기 때문에…</p>
</blockquote>

<p>단순히 1부터 시작해서 숫자를 늘려가거나, 원하는 숫자의 식별자를 만들어내는 방식입니다.</p>

<h2 id="-uuid-vs-auto-increment">🍗 UUID vs Auto Increment</h2>

<h3 id="단점-먼저">단점 먼저!</h3>

<h4 id="uuid">UUID</h4>

<ul>
  <li>가장 치명적인 단점은 <strong>성능</strong>에 저하를 일으킨다는 겁니다. 예들들어 각각 primary key 가 3,2,4,1,5 인 데이터를 삽입하고 검색의 효율을 위해 id를 정렬 한다고 칩시다. 그럼 1,2,3,4,5 순서로 저장이 되겠습니다. 자 이제 저 숫자가 16바이트의 엄청 큰 문자열이라고 생각해봅시다. 정렬하는 비용이 생각보다 많이 들 것입니다.</li>
  <li>사람이 보기 힘듭니다.</li>
  <li>필요 이상으로 공간을 많이 차지 합니다.</li>
</ul>

<h4 id="auto-increment">Auto Increment</h4>

<ul>
  <li>Auto Increment 방식은 분산 시스템에서 적합하지 않습니다. 게임서버를 예로 들어봅시다. 서버 A와 서버 B 를 통합하려 합니다. 그런데 서버 A와 서버 B를 별개로 두었기 때문에 서버 A 에 있는 Id가 서버 B 에도 존재할 수 있습니다. 통합하려면 상당히 고생해야할지도 모릅니다 ^^;;</li>
</ul>

<h3 id="장점은">장점은?</h3>

<h4 id="uuid-1">UUID</h4>

<ul>
  <li>Auto Increment 와는 반대로 분산 시스템에서 괜찮습니다.</li>
  <li>개발 환경에 독립적입니다. 어떤 디비를 쓰던 상관 없이 그냥 uuid 생성 함수 가져와서 쓰면 됩니다. 즉 DB를 바꿀 때 그냥 Id 갖다 박으셔도 됩니다.</li>
</ul>

<h4 id="auto-increment-1">Auto Increment</h4>

<ul>
  <li>빠릅니다.</li>
  <li>눈에 보기 쉽습니다. 로그를 분석하는데 “509ca884-67cc-…’” 어쩌고 나오면 갑자기 머리 아파집니다.</li>
</ul>

<p>사실 id 숫자가 40억개 이상 쓸 일이 없을거야!! 하면 그냥 Auto Increment 쓰셔도 무방합니다.</p>

<p>필요에 따라 UUID 를 쓰세요!! 꼭 UUID 일 필요는 없습니다. 상황에 맞게 쓰시면 될거 같네요!</p>

<hr />

<p>피드백은 항상 환영입니다!!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-43/"> leetcode Multiply Strings 문제풀기 </a>
    </h1>

    <span class="post-date">25 Jan 2021</span>

    <p>#[leetcode][43] Multiply Strings 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/multiply-strings/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>숫자 두개를 문자열로 줄테니 곱해줘!</p>

<p>근데 숫자가 엄청 커 ㅎㅎ;;;</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/multiply-strings/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>BigInteger 를 쓰면 매우 쉽지만, <strong>그러라고 문제 푸는거 아니잖아 ? ? ?</strong></p>

<p>저는 학창시절 때 배웠던 곱셈 방식을 이용했습니다!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    1 2 3
    4 5 6
ㅡㅡㅡㅡㅡ
    7 3 8
  6 1 5 0
4 9 2 0 0
ㅡㅡㅡㅡㅡ
5 6 0 8 8
</code></pre></div></div>

<p>이런 식으로 중간 단계를 두어 123 * 6, 123 * 5, 123 * 4 를 한 후 한 자리씩 더해주었습니다.</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">num1</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">num2</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">)</span> <span class="k">return</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">num2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">answer</span> <span class="o">=</span> <span class="nx">strPlus</span><span class="p">(</span><span class="nx">answer</span><span class="p">,</span> <span class="nx">subMultiply</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">num2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">subMultiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">str1</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">pos</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">let</span> <span class="nx">carryOut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">str1</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">target</span> <span class="o">+</span> <span class="nx">carryOut</span><span class="p">;</span>
    <span class="nx">carryOut</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span> <span class="o">%</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">carryOut</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">carryOut</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">gather</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pos</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">gather</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">strPlus</span> <span class="o">=</span> <span class="p">(</span><span class="nx">str1</span><span class="p">,</span> <span class="nx">str2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// str2가 커야한다</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">str1</span><span class="p">;</span>
    <span class="nx">str1</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">;</span>
    <span class="nx">str2</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">str1</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nx">str2</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">let</span> <span class="nx">carryOut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">str1</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">str2</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">str1Int</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">-</span> <span class="nx">diff</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">?</span> <span class="o">+</span><span class="nx">str1</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="nx">diff</span><span class="p">]</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">str1Int</span> <span class="o">+</span> <span class="o">+</span><span class="nx">str2</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">carryOut</span><span class="p">;</span>
    <span class="nx">carryOut</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span> <span class="o">%</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">carryOut</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">carryOut</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">gather</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gather</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">gather</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>제가 쓴 코드는 상당히 지저분한 코드입니다 ㅜㅜ..</p>

<p>저번에도 말했지만 <strong>간결할 수록 버그도 적어진다!!</strong></p>

<p>분명 줄일 수 있는, 간결해질 수 있는 방법이 있을 것이다. 함수화를 한다던가? 한번 찾아보고
코드를 줄이면 문서를 다시 수정하겠습니다!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-42/"> leetcode Trapping Rain Water 문제풀기 </a>
    </h1>

    <span class="post-date">25 Jan 2021</span>

    <p>#[leetcode][42] Trapping Rain Water 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/trapping-rain-water/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>내가 말이야.. 특이한 목욕탕을 만들고 싶거든.. 근데 물이 얼마나 필요할지 잘 모르겠어.. 니가 좀 구해줄래?</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/trapping-rain-water/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>대표적으로 이런 문제는 대부분 2 pointer 문제더라!!</p>

<p>일단 물 높이를 생각해봅시다!!. 인풋이 [2 ,0 ,0 ,3] 이렇게 주어지면, 왼쪽 기둥은 높이가 2, 오른쪽 기둥은 3 이다.
따라서 물을 다 채우면 왼쪽이 오른쪽 보다 낮기 때문에 높이 2까지만 채워집니다.</p>

<p>이 원리를 이용해 왼쪽에서 오른쪽 방향으로 하나씩 참고하는 포인터와 반대로 오른쪽에서 왼쪽 방향으로 참고하는 포인터를 생성합니다!.</p>

<p>만약 왼쪽에서 하나씩 보다가 현재 기둥이 오른쪽에서 참조하는 기둥의 높이보다 낮거나 같으면 한 칸 물을 채워주고, 반대로 오른쪽 기둥이 더 낮으면 오른쪽에서 물을 채워주는 형식으로 진행합니다. 채워주는 양은 현재 물의 높이 - 현재 기둥의 높이라고 생각하면 되겠습니다!. 물을 낮은 곳 부터 차근차근 채워나간다고 생각하면 편하겠군요.</p>

<p>왼쪽에서 먼저가던 오른쪽으로 가던 어느쪽으로 기준을 잡던 상관이 없지만 저는 왼쪽으로 기준 삼았습니다!.</p>

<h4 id="그래서-제가-어떻게-풀었냐면-">그래서 제가 어떻게 풀었냐면 !!</h4>

<p>물을 채울 때 높이가 가장 중요하다.
물의 높이는 왼쪽 기둥과 오른쪽 기둥의 높이를 비교하여 낮은 값과, 이때까지 물의 높이 중 더 큰 값을 선택하면 됩니다.
알아보기 쉽게 다음과 같이 표현했습니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">fixH</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">],</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">]));</span>
<span class="c1">// fixH가 물의 높이다.</span>
</code></pre></div></div>

<p>그런 다음 왼쪽 오른쪽 어디를 채울지 선택해 채우면 된다!!.!</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">trap</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">height</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">fixH</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixH</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">fixH</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">],</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">]));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">fixH</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">answer</span> <span class="o">+=</span> <span class="nx">fixH</span> <span class="o">-</span> <span class="nx">height</span><span class="p">[</span><span class="nx">left</span><span class="p">];</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">answer</span> <span class="o">+=</span> <span class="nx">fixH</span> <span class="o">-</span> <span class="nx">height</span><span class="p">[</span><span class="nx">right</span><span class="p">];</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>재미있다.</p>

<p>처음에 저는 상당히 긴 코드를 작성했었습니다. 제가 워낙 설계하지 않고 풀다보니 깔끔하게 풀지를 못해서 중간에 값을 변경하고 또 변경하다가 문제를 통과했습니다.</p>

<p>다른분들이 푼 아주 깔끔한 소스를 보고 약간의 자괴감이 드는 한편 또 깨닳음이 있었습니다.</p>

<p><strong>코드가 간결해 질수록 버그도 적어진다!!</strong></p>

<p>앞으로 간결하게 코드를 작성하도록 노력해야할 듯 합니다 !!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-40/"> leetcode  Combination Sum II 문제풀기 </a>
    </h1>

    <span class="post-date">22 Jan 2021</span>

    <p>#[leetcode][40] Combination Sum II 문제풀기!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/combination-sum-ii/">문제풀러가기✈</a></li>
</ul>

<hr />

<h2 id="-문제-요약">👓 문제 요약</h2>

<p>숫자들을 줄게. 그 숫자들을 조합해서 내가 원하는 숫자가 나오는 조합을 찾아줘!</p>

<p>단, 그 찾은 조합끼리 중복이 있으면 안돼!! 그리고 특정 숫자를 내가 준 개수보다 더 많이 쓰면 안돼!!!!</p>

<blockquote>
  <p>자세한 문제 설명과 릿코드 홈페이지 참고. <a href="https://leetcode.com/problems/combination-sum-ii/">문제풀러가기</a></p>
</blockquote>

<h2 id="-문제-풀이">🔑 문제 풀이</h2>

<p>모든 경우를 다 체크해서 만들어진다? 그 결과가 중복되지 않는다? 그럼 push 한다.</p>

<p>라는 방법이 있지만, 이 방법으로는 이미 풀어봤기 때문에 다른 방법을 찾아봤다!</p>

<h4 id="그래서-제가-어떻게-풀었냐면-">그래서 제가 어떻게 풀었냐면 !!</h4>

<p>정답에 중복이 되는 이유는 같은 숫자들끼리 아무런 구별 없이 길을 만들어 지나왔기 때문!!</p>

<p>같은 숫자를 쓰는 길은 한 번만 지나가게 하면 된다.!!!! 뚜둔</p>

<p>예를 들어</p>

<p>[1, 2, 2 ,2 ,5] , 5 라는 값이 주어졌다 하면,</p>

<p>1, 2, 5 를 지나가는 길은 오직 한 번만 체크하면 된다.
두 번째 2도 체크하고, 세 번째 2도 체크 할 필요가 없다.</p>

<h2 id="-소스코드-및-소스해석">🥽 소스코드 및 소스해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">combinationSum2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidates</span><span class="p">,</span> <span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">candidates</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span> <span class="c1">// 오름차순</span>
  <span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="cm">/**
   * @param {number[]} candidates
   * @param {number[]} path
   * @param {number} start
   * @param {number} target
   */</span>
  <span class="kd">const</span> <span class="nx">dfs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">_target</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// 다음 값도 체크해야한다!</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_target</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">answer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">_target</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">start</span> <span class="o">&gt;</span> <span class="nx">_candidates</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]</span> <span class="o">===</span> <span class="nx">_candidates</span><span class="p">[</span><span class="nx">next</span><span class="p">])</span> <span class="nx">next</span><span class="o">++</span><span class="p">;</span>

    <span class="nx">dfs</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">_target</span><span class="p">);</span>

    <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]);</span>
    <span class="nx">dfs</span><span class="p">(</span><span class="nx">_candidates</span><span class="p">,</span> <span class="p">[...</span><span class="nx">path</span><span class="p">],</span> <span class="nx">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">_target</span> <span class="o">-</span> <span class="nx">_candidates</span><span class="p">[</span><span class="nx">start</span><span class="p">]);</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="nx">dfs</span><span class="p">(</span><span class="nx">candidates</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">target</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">answer</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-문제-후기">🔨 문제 후기</h2>

<p>재미있다.</p>

<p>다른 사람의 풀이 보는 것도 재미있다.
세상에는 천재는 넘치고 내 시간은 부족하다.</p>

    <hr />
  </div>
  
</div>

<div class="pagination">
  
  <a
    class="pagination-item older"
    href="https://tocktock.github.io/page3"
    >Older</a
  >
    
  <a class="pagination-item newer" href="https://tocktock.github.io/">Newer</a>
   
</div>
</div>
  
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src="/public/js/script.js"></script>
  </body>
</html>
