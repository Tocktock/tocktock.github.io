<!DOCTYPE html>
<html lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     ì˜ì› &middot; ì›¹ ê°œë°œê³¼ ì¼ìƒ
    
  </title>

  
  <link rel="canonical" href="https://tocktock.github.io/" />
  

  <link rel="stylesheet" href="https://tocktock.github.io/public/css/poole.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/syntax.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/lanyon.css" />

  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400"
  />

  <link
    rel="apple-touch-icon-precomposed"
    sizes="144x144"
    href="https://tocktock.github.io/public/apple-touch-icon-precomposed.png"
  />
  <link rel="shortcut icon" href="https://tocktock.github.io/public/favicon.ico" />

  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://tocktock.github.io/atom.xml"
  />

  <!-- <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "//www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-178749172-1", "auto");
    ga("send", "pageview");
  </script> -->
</head>


  <body>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" />

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item description">
    <p>Developer with Cat</p>
  </div>

  <nav class="sidebar-nav">
    <a
      class="sidebar-nav-item active"
      href="https://tocktock.github.io/"
      >Home</a
    >
                
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/about/"
        >About me</a
      >
               
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/categories/"
        >Categories</a
      >
      
      <ul class="sidebar-categories">
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Algorithms"
            >Algorithms (28)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Jekyll"
            >Jekyll (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/elasticsearch"
            >elasticsearch (9)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/NestJS"
            >NestJS (5)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/DevTip"
            >DevTip (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/nodejs"
            >nodejs (1)</a
          >
        </li>
        
      </ul>
                                                                   
    </div>

    <a class="sidebar-nav-item" href="https://github.com/Tocktock/tocktock.github.io">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span>
  </nav>

  <div class="sidebar-item">
    <p>&copy; 2021. All rights reserved.</p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">ì˜ì›</a>
            <small>ì›¹ ê°œë°œê³¼ ì¼ìƒ</small>
          </h3>
        </div>
      </div>

      <div class="container content"><div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nestjs/redux-1/"> Redux ê¸°ë³¸ì„œ!! (feat. react context hook) </a>
    </h1>

    <span class="post-date">11 Feb 2021</span>

    <h2 id="-redux-ëŠ”-ì´ë ‡ê²Œ-ì‘ë™í•©ë‹ˆë‹¤">ğŸ”¨ Redux ëŠ” ì´ë ‡ê²Œ ì‘ë™í•©ë‹ˆë‹¤.</h2>

<p>ê¸°ë³¸ Redux ëŠ” ê°„ë‹¨í•˜ê²Œ ì‘ìš©í•©ë‹ˆë‹¤. ì¤‘ì•™í™” ëœ ìƒíƒœì €ì¥ì†Œê°€ ìˆê³  ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ê·¸ ìƒíƒœì €ì¥ì†Œì— ì ‘ê·¼í•´ì„œ ì›í•˜ëŠ” ê²ƒì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì‹ë“¤ì—ê²Œ ìƒíƒœ(state)ì™€ ìì‚°(props)ì„ ë¬¼ë ¤ì¤„ í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>

<p>Redux ë¥¼ êµ¬ì„±í•˜ëŠ” 3ê°€ì§€ ìš”ì†Œê°€ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Actions</strong></li>
  <li><strong>Store</strong></li>
  <li><strong>Reducers</strong></li>
</ul>

<h2 id="-actions">ğŸ™‚ Actions</h2>

<p>ê°„ë‹¨í•˜ê²Œ Actions ëŠ” ì´ë²¤íŠ¸ ë°ì´í„° ì…ë‹ˆë‹¤.
ë°ì´í„°ëŠ” ì‹¬í”Œí•œ Javascript Object ì…ë‹ˆë‹¤. ë‹¤ìŒì²˜ëŸ¼ìš”.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="nx">REQUEST_ROBOTS_SUCCESS</span><span class="p">,</span>
  <span class="nx">isPending</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">payload</span><span class="p">:</span> <span class="p">{</span>
      <span class="nl">robots</span> <span class="p">:</span> <span class="p">[</span><span class="nx">some</span> <span class="nx">api</span> <span class="nx">call</span> <span class="nx">results</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ Actions ë¥¼ dispatch ë¼ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ Redux Store ë¡œ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dispatch</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="nx">REQUEST_ROBOTS_SUCCESS</span><span class="p">,</span>
  <span class="na">isPending</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">robots</span> <span class="p">:</span> <span class="p">[</span><span class="nx">some</span> <span class="nx">api</span> <span class="nx">call</span> <span class="nx">results</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="-reducers">ğŸ™‚ Reducers</h2>

<p>Reducers ëŠ” ìˆœìˆ˜í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ì „ ìƒíƒœ ê°’ì„ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœ ê°’ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>

<blockquote>
  <p>ìˆœìˆ˜í•¨ìˆ˜ë€ ê°’ì„ ë°›ì•„ì„œ ì–´ë–¤ ê°’ì„ ë‹¤ì‹œ ë¦¬í„´ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë©°, ì´ë•Œ ë™ì¼í•œ ê°’ì„ ë°›ìœ¼ë©´ ê·¸ ê°’ì— ëŒ€í•´ì„œ í•­ìƒ ê°™ì€ ê°’ì„ ë¦¬í„´í•´ì¤€ë‹¤ë©´ ì´ë¥¼ ìˆœìˆ˜í•¨ìˆ˜ë¼ê³  í•©ë‹ˆë‹¤..</p>
</blockquote>

<p>dispatch ë¥¼ í†µí•´ action ì„ ë°›ì€ Reducer ëŠ” action ì˜ íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥¸ í–‰ë™ì„ í•©ë‹ˆë‹¤.</p>

<p>reqeustBots ë¼ëŠ” Reducer ë¥¼ ì˜ˆë¥¼ ë“¤ë©´,</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">requestRobots</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="nx">initialStateRobots</span><span class="p">,</span> <span class="nx">action</span><span class="o">=</span><span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="na">REQUEST_ROBOTS_PENDING</span><span class="p">:</span>
      <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">state</span><span class="p">,</span> <span class="p">{</span><span class="na">isPending</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
    <span class="k">case</span> <span class="na">REQUEST_ROBOTS_SUCCESS</span><span class="p">:</span>
      <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">state</span><span class="p">,</span> <span class="p">{</span><span class="na">robots</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span> <span class="na">isPending</span><span class="p">:</span> <span class="kc">false</span><span class="p">})</span>
    <span class="k">case</span> <span class="na">REQUEST_ROBOTS_FAILED</span><span class="p">:</span>
      <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">state</span><span class="p">,</span> <span class="p">{</span><span class="na">error</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">})</span>
    <span class="na">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>ì´ì²˜ëŸ¼ ìƒê²¼ìœ¼ë©° ìˆœìˆ˜í•¨ìˆ˜ ì´ë¯€ë¡œ state ë¥¼ ë³€í™”ì‹œí‚¨ë‹¤ê¸° ë³´ë‹¤ëŠ” ìƒˆë¡œìš´ state ë¥¼ ë§Œë“¤ì–´ ë¦¬í„´í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<h2 id="-store">ğŸ™‚ Store</h2>

<p>store ëŠ” ì•±ì˜ state ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">Reducers</span><span class="p">);</span>
</code></pre></div></div>

<p>ì´ store ë¥¼ Redux ì˜ Provider ë¥¼ í†µí•´ ì•±ìœ¼ë¡œ ì „ë‹¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/Provider&gt;</span><span class="err">,
</span>  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<p>App ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì´ store ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ react-redux ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ connect í•¨ìˆ˜ë¥¼ í†µí•´ ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mapStateToProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">searchField</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">searchRobots</span><span class="p">.</span><span class="nx">searchField</span><span class="p">,</span>
    <span class="na">robots</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">requestRobots</span><span class="p">.</span><span class="nx">robots</span><span class="p">,</span>
    <span class="na">isPending</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">requestRobots</span><span class="p">.</span><span class="nx">isPending</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="c1">// dispatch the DOM changes to call an action. note mapStateToProps returns object, mapDispatchToProps returns function</span>
<span class="c1">// the function returns an object then uses connect to change the data from redecers.</span>
<span class="kd">const</span> <span class="nx">mapDispatchToProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">onSearchChange</span><span class="p">:</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">(</span><span class="nx">setSearchField</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)),</span>
    <span class="na">onRequestRobots</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">(</span><span class="nx">requestRobots</span><span class="p">()),</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span> <span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">App</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>mapStateToProps : ìš°ë¦¬ê°€ ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  state.</li>
  <li>mapDispatchToProps : ìš°ë¦¬ê°€ ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  actions ë“¤ì„ dispatch í•  ì •ë³´ë¥¼ ë‹´ì€ í•¨ìˆ˜.</li>
</ul>

<hr />

<h2 id="-redux-middleware">ğŸ™‚ Redux Middleware</h2>

<p>Redux ì—ì„œëŠ” Action ì´ dispatch ë˜ê¸° ì „ ì´ë¥¼ ê°€ë¡œì±„ ê°€ê³µí•  ìˆ˜ ìˆëŠ” middleware ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">thunkMiddleware</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">redux-thunk</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">createLogger</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">redux-logger</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span>
  <span class="nx">rootReducers</span><span class="p">,</span>
  <span class="nx">applyMiddleware</span><span class="p">(</span><span class="nx">thunkMiddleware</span><span class="p">,</span> <span class="nx">logger</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<p>redux-thunk ëŠ” ë¹„ë™ê¸° ìˆ˜í–‰ì—, redux-logger ëŠ” ë¡œê·¸ë¥¼ ë‚¨ê¸°ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” middleware ì…ë‹ˆë‹¤.</p>

<h2 id="-react-context-hook">ğŸ™„ React Context hook</h2>

<p>React ì˜ Context hook ë˜í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ëª©ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. Redux ì—ì„œì™€ ë¹„ìŠ·í•˜ê²Œ
Provider / Consumer íŒ¨í„´ìœ¼ë¡œ state ë¥¼ ì œê³µ/ ì†Œë¹„ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>Redux ì™€ ë¹„ìŠ·í•˜ê²Œ state ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ ì™œ Redux ë¥¼ ì•„ì§ ì‚¬ìš©í• ê¹Œìš”??</p>

<p>Redux ì˜ <strong>ì¥ì </strong></p>

<ul>
  <li>Debugging ê³¼ Testing í•˜ëŠ”ë° í¸ë¦¬í•©ë‹ˆë‹¤. Redux DevTools ë˜ëŠ” logger ë“±ì„ ì´ìš©í•œë‹¤ë©´ ìš°ë¦¬ ì•±ì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ ì „í™˜ê³¼ì • ì‚¬ì´ì— ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>Redux ëŠ” ì–´ë–»ê²Œ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ê°•ìš”í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. í° ê·œëª¨ì˜ ì•±ì—ì„œ ê´€ë¦¬í•˜ê¸° ìˆ˜ì›”í•©ë‹ˆë‹¤.</li>
  <li>Redux ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™”ê°€ ë˜ì–´ìˆê³ , í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ Rerender í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì„±ëŠ¥ìƒì—ì„œ ì•½ê°„ì˜ ì´ë“ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ìƒíƒœë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ëŠ”ë° ë›°ì–´ë‚©ë‹ˆë‹¤.</li>
  <li>ì´ˆê¸° ìƒíƒœë¥¼ ì„œë²„ì— ì „ì†¡í•˜ì—¬ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ render í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ SSR ì— ê°•ì ì´ ìˆìŠµë‹ˆë‹¤.</li>
</ul>

<p>ìœ„ì˜ ì¥ì ì´ í•„ìš” ì—†ë‹¤ë©´ React hooks ë§Œ ì¨ë„ ë©ë‹ˆë‹¤.
í•„ìš” ì´ìƒì˜ ì¼ì„ í•  í•„ìš”ê°€ ì—†ì–´ì§€ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ëª¨ë“  ê°œë°œìê°€ React hooks ê°€ Redux ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆë‚˜ìš”? ë¼ëŠ” ì§ˆë¬¸ì—
â€œì•„ë‹ˆìš”â€ ë¼ê³  ëŒ€ë‹µí•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ë§Œ React hooks ë˜ëŠ” React ê´€ë ¨ ê¸°ëŠ¥ì´ ë” ì„±ì¥í•œë‹¤ë©´ Redux ë¥¼ ëŒ€ì²´í•  ìˆ˜ë„ ìˆì§€ ì•Šì„ê¹Œ ìƒê°í•©ë‹ˆë‹¤.</p>

<hr />

<p>ì°¸ê³  :</p>

<ul>
  <li><a href="https://blog.logrocket.com/why-use-redux-reasons-with-clear-examples-d21bffd5835/">https://blog.logrocket.com/why-use-redux-reasons-with-clear-examples-d21bffd5835/</a></li>
  <li><a href="https://www.ibrahima-ndaw.com/blog/7-steps-to-understand-react-redux/#2-what-is-redux-and-why-we-need-it">https://www.ibrahima-ndaw.com/blog/7-steps-to-understand-react-redux/#2-what-is-redux-and-why-we-need-it</a></li>
  <li>https://blog.asayer.io/do-you-really-need-redux-pros-and-cons-of-this-state-management-library</li>
  <li>Udemy ê°•ì˜ - The Complete Junior to Senior Web Developer Roadmap (2021)</li>
</ul>

<p>ì°¸ê³  ì˜ˆì œ :</p>

<ul>
  <li><a href="https://github.com/gothinkster/react-redux-realworld-example-app">https://github.com/gothinkster/react-redux-realworld-example-app</a></li>
  <li><a href="https://github.com/aneagoie/robofriends-redux">https://github.com/aneagoie/robofriends-redux</a></li>
</ul>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nestjs/nestjs-4-testing/"> NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë¦¬íŒ©í† ë§ê³¼ e2e í…ŒìŠ¤íŠ¸!! </a>
    </h1>

    <span class="post-date">09 Feb 2021</span>

    <h1 id="2-nestjs-ë¸”ë¡œê·¸-ë§Œë“¤ê¸°---ë¦¬íŒ©í† ë§ê³¼-e2e-í…ŒìŠ¤íŠ¸">2. NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë¦¬íŒ©í† ë§ê³¼ e2e í…ŒìŠ¤íŠ¸!!</h1>

<p>ì´ë²ˆì—ëŠ” ì´ì „ í¬ìŠ¤íŠ¸ì—ì„œ ë‹¤ë¤˜ë˜ ë‚´ìš©ì— ëŒ€í•´ì„œ Refactoring ì„ í•˜ê³  í…ŒìŠ¤íŠ¸ë„ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h2 id="-refactoring-">ğŸ”¨ Refactoring !!</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â””â”€modules
    â””â”€user
        â”‚  user.controller.ts
        â”‚  user.module.ts
        â”‚  user.repository.ts
        â”‚  user.service.ts
        â”‚  user.spec.ts
        â”‚
        â”œâ”€dto
        â”‚      create-user.dto.ts
        â”‚      index.ts
        â”‚      update-user.dto.ts
        â”‚
        â”œâ”€entities
        â”‚      user.entity.ts
        â”‚
        â”œâ”€exceptions
            email-already-exist-exception.ts
            user-not-found.exception.ts
            username-already-exist-exception.ts
</code></pre></div></div>

<p>ê³„ì† ë¦¬íŒ©í† ë§ í•˜ë‹¤ë³´ë‹ˆ ìœ„ì™€ ê°™ì€ êµ¬ì¡°ê°€ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
íŒŒì¼ ì´ë¦„ì´ ë°”ë€ ê²ƒë„ ìˆê³ , ë‚´ë¶€ êµ¬í˜„ì‚¬í•­ì´ ë°”ë€ ê²ƒë„ ìˆìŠµë‹ˆë‹¤.
ë¦¬íŒ©í† ë§ í•˜ë©´ì„œ ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ ëŠë‚ë‹ˆë‹¤.</p>

<h3 id="userexceptions">user.exceptions</h3>

<p>Custom Exception ì„ ë§Œë“¤ê¸° ìœ„í•´ user í´ë” ì•ˆì— exceptions í´ë”ë¥¼ ë§Œë“­ì‹œë‹¤!</p>

<p>ì´ë©”ì¼ê³¼ ìœ ì €ë„¤ì„ì´ ì¤‘ë³µ ë˜ì—ˆì„ ë•Œ ê·¸ë¦¬ê³  ìœ ì €ë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•Œ ë°œìƒ ì‹œí‚¬ exception ì„ ê°ê° ë§Œë“¤ì–´ ì¤ì‹œë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">username-already-exist-exception.ts</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BadRequestException</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@nestjs/common</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">UsernameAlreadyExistException</span> <span class="kd">extends</span> <span class="nx">BadRequestException</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">error</span><span class="p">?:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="dl">"</span><span class="s2">username already exist</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">email-already-exist-exception.ts</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BadRequestException</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@nestjs/common</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">EmailAlreadyExistException</span> <span class="kd">extends</span> <span class="nx">BadRequestException</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">error</span><span class="p">?:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="dl">"</span><span class="s2">email already exist</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">user-not-found.exception.ts</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BadRequestException</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@nestjs/common</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserNotFoundException</span> <span class="kd">extends</span> <span class="nx">BadRequestException</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">error</span><span class="p">?:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="dl">"</span><span class="s2">user not found</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ê°ê°ì˜ í´ë˜ìŠ¤ëŠ” BadRequestException ì„ ìƒì†ë°›ê³  ìˆìŠµë‹ˆë‹¤.
í•´ë‹¹ Exception ì„ ë°œìƒì‹œí‚¤ë©´ Status Code ëŠ” 400(BadRequest) ì´ ë°œìƒë©ë‹ˆë‹¤.</p>

<p>ë§¤ìš° ê°„ë‹¨í•˜ê²Œ Custom Exception ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤!!</p>

<h3 id="userservice">user.service</h3>

<p>create ë©”ì†Œë“œ ì•ˆì—ì„œ ì´ì „ì— ë§Œë“¤ì—ˆë˜ QueryBuilder ë¶€ë¶„ì„ ì‚­ì œí•˜ê³  ë°”ë¡œ ìœ„ì—ì„œ ë§Œë“¤ì—ˆë˜ Custom Exceptions ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">UserService.create</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">thisUser</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">username</span> <span class="p">});</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">thisUser</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">UserName is already exist</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nx">UsernameAlreadyExistException</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">thisEmail</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="nx">email</span> <span class="p">});</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">thisEmail</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Email is already exist</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nx">EmailAlreadyExistException</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  ìœ ì €ë¥¼ ì €ì¥í•˜ì—¬ ë°˜í™˜í•  ë•Œ ë‹¨ìˆœ number ê°’ì´ ì•„ë‹ˆë¼ Object ë¥¼ ë°˜í™˜í•´ì¤ì‹œë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newUser</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="k">return</span> <span class="p">{</span> <span class="na">userId</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">};</span>
</code></pre></div></div>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ remove ë©”ì†Œë“œ ì•ˆì˜ ë‚´ìš©ì„ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ì–´ ì¤ì‹œë‹¤.</p>

<blockquote>
  <p>ì´í›„ Auth ê´€ë ¨ ê¸°ëŠ¥ì„ ë§Œë“¤ë©´ì„œ remove ê¸°ëŠ¥ì€ ì‚¬ë¼ì§ˆê²ë‹ˆë‹¤â€¦</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">UserService.remove</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="nx">remove</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">DeleteResult</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="k">delete</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="nx">email</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="usercontroller">user.controller</h3>

<p>remove ì™€ ê´€ë ¨ëœ controller ë¶€ë¶„ì„ ë‹¤ìŒìœ¼ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”!</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">UsersController.remove</code></li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">@</span><span class="nd">Delete</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
  <span class="nx">remove</span><span class="p">(@</span><span class="nd">Body</span><span class="p">(</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span><span class="p">)</span> <span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">usersService</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">@Body</code> annotation ì€ response body ì•ˆì—ì„œ í•´ë‹¹í•˜ëŠ” í•„ë“œë¥¼ ê°€ì ¸ì™€ ë³€ìˆ˜ì— ì…ë ¥í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤!!</p>

<h2 id="ìƒˆí•´-ì²«-í…ŒìŠ¤íŠ¸-ë‘ê·¼ë‘ê·¼">ğŸ§¡ğŸ§¡ìƒˆí•´ ì²« í…ŒìŠ¤íŠ¸ ë‘ê·¼ë‘ê·¼</h2>

<p>ë¨¼ì € ìœ ë‹›í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹Œ, e2e í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•œ ì½”ë“œì„ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.
í…ŒìŠ¤íŠ¸ ê´€ë ¨ ê¸°ìˆ ì´ ë§ì´ ë¶€ì¡±í•´ì„œ ê³„ì† ê³µë¶€ì¤‘ì…ë‹ˆë‹¤. ã…œã…œ ë” ì•Œì•„ê°€ë©´ì„œ í¬ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!!</p>

<p>í…ŒìŠ¤íŠ¸ëŠ” í•´ë‹¹ url ë¡œ ìš”ì²­ ìˆ˜í–‰ì‹œ ì ì ˆí•œ ì‘ë‹µì´ ì˜¤ëŠ” í™•ì¸í•©ë‹ˆë‹¤.</p>

<p>e2e í…ŒìŠ¤íŠ¸ ë°©ë²•ì— ì •ì„ì´ ìˆê² ì§€ë§Œ ì§„í–‰ ë„ì¤‘ ë§ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬.. ì¼ë‹¨ ì•¼ë§¤ë¡œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>

<p><strong>ì„œë²„ì‹¤í–‰ -&gt; urlë¡œ ìš”ì²­</strong></p>

<p>ìš”ì²­ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ supertest ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¨¼ì € ì„¤ì¹˜í•©ì‹œëŒœ!!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> supertest
</code></pre></div></div>

<blockquote>
  <p>supertest ê´€í•œ ë‚´ìš©ì€ ë‹¤ìŒë§í¬ì—ì„œ ë” í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤!!
<a href="https://www.npmjs.com/package/supertest">npm supertest</a></p>
</blockquote>

<p>ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•œ nest ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ì„¤ì¹˜í•©ì‹œë‹¤ !!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm i <span class="nt">--save-dev</span> @nestjs/testing
</code></pre></div></div>

<p>ì´ì œ user.spec.ts ë¼ëŠ” íŒŒì¼ì„ user í´ë” ì•ˆì— ìƒì„±í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•©ì‹œë‹¤!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">request</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">supertest</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://localhost:3000</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">User create í…ŒìŠ¤íŠ¸</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">).</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test1@example.com</span><span class="dl">"</span> <span class="p">});</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">).</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test2@example.com</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">email ì¤‘ë³µ í™•ì¸</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">send</span><span class="p">({</span>
        <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test1@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">testuser</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mi">201</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">send</span><span class="p">({</span>
        <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test1@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">abcd</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">Email is already exist</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">username ì¤‘ë³µ í™•ì¸</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">send</span><span class="p">({</span>
        <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test2@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">testuser</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mi">201</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">request</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">send</span><span class="p">({</span>
        <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test1@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">testuser</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">"</span><span class="s2">UserName is already exist</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">describe</code> ë©”ì†Œë“œë¡œ í…ŒìŠ¤íŠ¸ í•  ë†ˆë“¤ì„ ê·¸ë£¹í™” í•´ì¤ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">beforeEach</code> ë©”ì†Œë“œë¥¼ í†µí•´ ê° í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ í…ŒìŠ¤íŠ¸ ìœ ì €ë¥¼ ì‚­ì œí•´ì¤ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">it</code> ë©”ì†Œë“œë¥¼ í†µí•´ ê°ê° í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">it</code> ì€ <code class="language-plaintext highlighter-rouge">test</code> ë©”ì†Œë“œì™€ ê°™ì€ ê¸°ëŠ¥ì„ í•˜ë©° ë³„ì¹­ì…ë‹ˆë‹¤.</li>
</ul>

<p>ì ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë´…ì‹œë‹¤!!</p>

<p>ë¨¼ì € ì„œë²„ì‹¤í–‰!!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run start
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ë„ ì‹¤í–‰ !!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run <span class="nb">test</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; nestjs-practice@0.0.1 test C:\Users\jiyoung\nestjs-practice
&gt; jest

PASS  src/modules/user/user.spec.ts
User create í…ŒìŠ¤íŠ¸
    âˆš email ì¤‘ë³µ í™•ì¸ (173 ms)
    âˆš username ì¤‘ë³µ í™•ì¸ (24 ms)

Test Suites: 1 passed, 1 total
Tests:       2 passed, 2 total
Snapshots:   0 total
Time:        1.392 s, estimated 5 s
Ran all test suites.
</code></pre></div></div>

<p>ë‹¤ìŒê³¼ ê°™ì´ í†µê³¼í•˜ë©´ ì„±ê³µì…ë‹ˆë‹¤!!</p>

<blockquote>
  <p>package.json ì—ì„œ jest ê´€ë ¨ ì„¤ì •ì„ spec ë˜ëŠ” test ê°€ ë¶™ì€ ts íŒŒì¼ë¡œ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹í•˜ëŠ” íŒŒì¼ì€ ëª¨ë‘ í…ŒìŠ¤íŠ¸í•˜ê²Œ ë©ë‹ˆë‹¤!!</p>
</blockquote>

<hr />

<p>í…ŒìŠ¤íŠ¸ ê´€ë ¨í•´ì„œëŠ” ì•„ì§ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤ !!
e2e í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € í•´ë³´ê¸° ìœ„í•´ ì‹œë„ëŠ” ë§ì´ í–ˆìœ¼ë‚˜ ê·¸ë§Œí¼ ì˜¤ë¥˜ê°€ ë§ì´ ë‚˜ë”êµ°ìš” ã…œã…œ
ìœ„ì™€ ê°™ì€ ì•¼ë§¤ ë°©ë²•ì„ í†µí•´ í…ŒìŠ¤íŠ¸ë¥¼ í–ˆìœ¼ë‚˜, ì´í›„ì— í•´ê²°ë°©ë²•ì„ ì•Œì•„ì™€ì„œ í¬ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê² ìŠµë‹ˆë‹¤!!</p>

<p>ë˜í•œ ì´í›„ì—ëŠ” Unit Test ê´€ë ¨ ê¸°ëŠ¥ë„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤!</p>

<p>ë‹¤ìŒì—ëŠ” post ëª¨ë“ˆì„ ë§Œë“¤ì–´ë´…ì‹œë‹¤!!
ê°ì‚¬í•©ë‹ˆë‹¤.</p>

<p>í”¼ë“œë°±ì€ í•­ìƒ í™˜ì˜ì…ë‹ˆë‹¤.</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nodejs/nodejs-1-what-is-nodejs/"> Node.js ì˜ íŠ¹ì§•ê³¼ í•œê³„ </a>
    </h1>

    <span class="post-date">01 Feb 2021</span>

    <h2 id="-nodejs-ë“±ì¥í•˜ë‹¤">ğŸ¤— Node.JS ë“±ì¥í•˜ë‹¤!!</h2>

<p>ì´ˆê¸° ì›¹ í˜ì´ì§€ëŠ” ì§€ê¸ˆì²˜ëŸ¼ ë™ì ì´ì§€ ì•Šê³  ì •ì ì´ì—ˆìŠµë‹ˆë‹¤.
ê·¸ëŸ°ë° ë™ì ìœ¼ë¡œ ì¢€ ì›€ì§ì´ë©´ ì¢‹ê² ëŠ”ë°.. í•˜ê³  ë‚˜ì˜¨ ê²ƒì´ Javascript ì…ë‹ˆë‹¤.
Javascript Javascript ëŠ” ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ í†µí•´ DOM Context ë¥¼ ì œì–´í•˜ë©° ë™ì ì¸ ì›¹í˜ì´ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>ì‹œê°„ì´ í˜ëŸ¬ 2008 ë…„ êµ¬ê¸€ì´ í¬ë¡¬ì„ ë°œí‘œí•˜ë©´ì„œ V8 ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ ë§Œë“¤ê²Œ ë©ë‹ˆë‹¤.
ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìƒë‹¹í•œ ìˆ˜ì¤€ì˜ í¼í¬ë¨¼ìŠ¤ë¥¼ ë³´ì´ë©° ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ë¥¸ ë¶„ì•¼ì— ì ìš©í•˜ìëŠ” ì˜ê²¬ì´ ìƒê¸°ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì´í›„ CommonJS í‘œì¤€ì´ ë°œí‘œë˜ê³  ê³§ë°”ë¡œ CommonJS ì™€ V8 ì—”ì§„ì„ ê¸°ë°˜ìœ¼ë¡œ Node.js ê°€ íƒ„ìƒí•©ë‹ˆë‹¤.</p>

<h2 id="-nodejs-ê°€-ë¹›ë‚˜ê¸°-ì‹œì‘í–ˆì–´">ğŸ˜Š Node.js ê°€ ë¹›ë‚˜ê¸° ì‹œì‘í–ˆì–´!!</h2>

<p>Node.js ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li>None Blocking</li>
  <li>Event Driven</li>
  <li>Data Intensive</li>
  <li>I/O Intensive</li>
</ul>

<p>ì‚¬ì‹¤ ìœ„ì˜ íŠ¹ì§• ëª¨ë‘ Node.js ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<h2 id="-ì“°ë ˆë“œ-ê¸°ë°˜-vs-ë¹„ë™ê¸°-ì´ë²¤íŠ¸-ê¸°ë°˜">ğŸ˜ƒ ì“°ë ˆë“œ ê¸°ë°˜ vs ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜</h2>

<p>Node.js ê°€ ê°œë°œëœ ë°°ê²½ê³¼ ëª©ì ì—ëŠ” ë‹¤ìˆ˜ì˜ ì—°ê²°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¹„ìš©ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•˜ëŠ” ê²ƒì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ Multi Thread í™˜ê²½ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.</p>

<p>Multi Thread ê¸°ë°˜ì˜ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì›¹ ì„œë²„ì— ìš”ì²­ì„ í•˜ê²Œ ë˜ë©´ ì„œë²„ì—ì„œëŠ”</p>

<ul>
  <li>ì¼ì •í•œ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ Thread ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ë˜ëŠ”</li>
  <li>Thread pool ì—ì„œ ì ë‹¹í•œ Thread ë¥¼ í•´ë‹¹ ìš”ì²­ì— í• ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<p>ì´ í• ë‹¹ëœ Thread ëŠ” í•´ë‹¹ ìš”ì²­ì´ ì™„ë£Œë  ë•Œ ê¹Œì§€ ì´ ìš”ì²­ì— í• ë‹¹ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì½”ë“œê°€ ìˆ˜í–‰ë˜ëŠ” ì†ë„ì™€ I/O ì¥ì¹˜ì˜ ìˆ˜í–‰ ì†ë„ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Blocking I/O ì— ëŒ€í•œ ë¬¸ì œê°€ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.</p>

<p>Blocking I/O ìì²´ê°€ ë°œìƒì‹œí‚¤ëŠ” ë¬¸ì œëŠ”</p>

<ul>
  <li>I/O ìš”ì²­ì„ í•˜ê³  ì‘ë‹µì´ ì˜¬ ë•Œê¹Œì§€ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³  ì‹œê°„ì„ ë‚­ë¹„í•˜ëŠ” ê²ƒê³¼</li>
  <li>ìŠ¤ì¼€ì¥´ë§ ì²˜ë¦¬ì™€ ë¬¸ë§¥ ì „í™˜ì‹œ CPU ì—°ì‚°ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—</li>
</ul>

<p>ì“°ë ˆë“œê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ì´ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ê°€ ì¼ì–´ë‚œë‹¤ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p>

<p>Node.js ëŠ” Single Thread ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>

<p>ë­ ?? <strong>Single Thread ë©´ ìš”ì²­ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì•„ë¬´ê²ƒë„ ëª»í•˜ì–ì•„!!</strong></p>

<p>ì˜¤.. ì˜¤í•´ì…ë‹ˆë‹¤!!</p>

<p>Node.js ëŠ” <strong>Single Thread ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹</strong> ìœ¼ë¡œ êµ¬ë™ë©ë‹ˆë‹¤.</p>

<p>Node.js ëŠ”</p>

<ul>
  <li>I/O ì‘ì—… ì²˜ë¦¬ì— ëŒ€í•œ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ë‹¤ìŒ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</li>
  <li>ëŒ€ì‹  I/O ì‘ì—…ì´ ì¢…ë£Œë˜ë©´ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³ ,</li>
  <li>ì´ ì´ë²¤íŠ¸ëŠ” í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì˜ ì´ë²¤íŠ¸ íì— ë“±ë¡ë˜ê²Œ ë©ë‹ˆë‹¤.</li>
  <li>ë…¸ë“œê°€ ì´ ì´ë²¤íŠ¸ íë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê³„ì† ê°ì§€í•˜ì—¬ í•´ë‹¹ ì´ë²¤íŠ¸ ì´í›„ ìˆ˜í–‰í•´ì•¼ í•  ì‘ì—…ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<p><strong>ì´ë²¤íŠ¸ ë£¨í”„</strong> ëŠ” ì‘ì—…ì„ ìš”ì²­í•˜ë©´ì„œ ê·¸ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ ì–´ë–¤ ì‘ì—…ì„ ì§„í–‰í• ì§€ì— ëŒ€í•œ ì½œë°±í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ë™ì‘ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ í•´ë‹¹ ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë™ì‘ ë°©ì‹ì„ ë§í•©ë‹ˆë‹¤. ë§Œì•½ HTTP ìš”ì²­ì´ ì„œë²„ì— ì˜¤ë©´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì´ë¥¼ ê°ì§€í•˜ê³  ì ë‹¹í•œ Worker Thread ë¥¼ ìƒì„±í•˜ì—¬ í•´ë‹¹ ìš”ì²­ì„ í• ë‹¹í•œ í›„ ë‹¤ë¥¸ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.</p>

<p>ë‹¤ì‹œ ë§í•´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì–´ë–¤ ìš”ì²­ì´ ë°œìƒí•˜ë©´ ê·¸ ì‘ì—…ì— ëŒ€í•´ <strong>ì“°ë ˆë“œ ì‹¤í–‰ë§Œì„ ì¼ìœ¼í‚¬ ë¿</strong>ì…ë‹ˆë‹¤. ì´í›„ ì‘ì—…ì„ í• ë‹¹ë°›ì•˜ë˜ í•´ë‹¹ ì“°ë ˆë“œê°€ ëª¨ë“  ì‘ì—…ì„ ë§ˆì¹˜ë©´ ë¯¸ë¦¬ ì „ë‹¬ë°›ì€ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì´ë²¤íŠ¸ ë£¨í”„ë¡œ ì‘ë‹µí•˜ê²Œ ë˜ë©° ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì´ê²ƒì„ ì‹¤í–‰í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê²°ê³¼ë¥¼ ì‘ë‹µí•´ì¤ë‹ˆë‹¤.</p>

<h2 id="-nodejs-ì˜-í•œê³„">ğŸ™€ Node.js ì˜ í•œê³„</h2>

<p>Node.js : <strong>Culculte Intensive</strong> í•œ ë¶„ì•¼ëŠ” ìì‹  ì—†ì–´!!</p>

<p>ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ë´…ì‹œë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100000000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
</code></pre></div></div>

<p>ê°ì´ ì˜¤ì‹­ë‹ˆê¹Œ??</p>

<p>ë‹¤ì‹œ ë§í•˜ìë©´ Node.js ëŠ” Single Thread ê¸°ë°˜ì…ë‹ˆë‹¤. ìœ„ ìƒí™©ê³¼ ê°™ì´ ê¸´ ì‹œê°„ì´ í•„ìš”í•œ ì—°ì‚°ì´ ìˆìœ¼ë©´ ê±°ê¸°ì„œ Block ì´ ë©ë‹ˆë‹¤.</p>

<p>ë°˜ë©´ Multi Thread ê¸°ë°˜ì˜ ì–´ë–¤ Thread ê°€ ìœ„ì™€ ê°™ì€ ìš”ì²­ì„ ë°›ê³  ì—°ì‚°ì„ í•œë‹¤í•´ë„ ì—¬ëŸ¬ Thread ê°€ ìˆìœ¼ë‹ˆ ë‹¤ë¥¸ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>Thread ëŠ” ì‹œë¶„í•  ë˜ëŠ” íŠ¹ì • ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ê¸°ê°„ë™ì•ˆ ìˆ˜í–‰ë˜ê³  Context Switching ì„ í†µí•´ ì‘ì—…ì„ ë¯¸ë£¨ê²Œ ë©ë‹ˆë‹¤.</p>
</blockquote>

<p>ë”°ë¼ì„œ ë‹¨ìˆœíˆ ì—°ì‚°ì— ì§‘ì¤‘ì ì¸ ë¶„ì•¼ì— ëŒ€í•´ì„œëŠ” Node.js ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì–¸ì–´ ë‹¤ë¥¸ ì½”ë“œë¡œ ì‘ì„±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ìš°íšŒí•˜ì‹œëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>

<hr />

<h2 id="-ë§ˆì¹˜ë©°">ğŸ˜­ ë§ˆì¹˜ë©°</h2>

<p>ì‚¬ì‹¤ Node.js í™˜ê²½ì„ ì‚¬ìš©í•˜ë©´ì„œ, ë‹¨ìˆœíˆ ë°±ì—”ë“œë‘ í”„ë¡ íŠ¸ì—”ë“œ ë‘˜ ë‹¤ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹ˆê¹Œ !! ë¼ëŠ” ì§€ì‹ë§Œ ê°€ì§€ê³ </p>

<p>ì™œ Node.js ê°€ ë¬´ì—‡ì„ ëª©ì ìœ¼ë¡œ íƒ„ìƒí–ˆëŠ”ì§€ ì–´ë–¤ì ì— ê°•ì ì„ ê°€ì§€ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ëª°ëë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ìƒê°ë³´ë‹¤ Performance ë„ í›Œë¥­í•˜ë‹¤ëŠ” ê²ƒì— ë†€ëê³  Single Thread ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ ìˆ˜í–‰ê³¼ì •ì— ë‹¤ì‹œ ë†€ëìŠµë‹ˆë‹¤.
ìµœì†Œí•œ ì™œ ì“°ëŠ”ì§€ ì´ í™˜ê²½ì˜ ì¥ì ì´ ë¬´ì—‡ì¸ì§€ëŠ” ì•„ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>Node.js ì§êµ° ë©´ì ‘ì„ ë³´ë©´ì„œ íŠ¹íˆ ë” ë§ì´ ëŠê¼‡ìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ì¶”ê°€ë¡œ, Node.js ë„ ì–´ë–¤ ë¶€ë¶„ì—ì„œëŠ” Multi Thread ìš”ì†Œë¥¼ ì“°ê¸°ë„ í•©ë‹ˆë‹¤.
ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ë‹¤ë¥¸ ë‚´ìš©ê³¼ í•¨ê»˜ ë” ì¢‹ì€ ì •ë³´ë¥¼ ê°€ì§€ê³  ë‹¤ì‹œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.!!</p>

<p>ì¶œì²˜</p>

<ul>
  <li><a href="https://zbulletjournal.tistory.com/85">https://zbulletjournal.tistory.com/85</a></li>
  <li><a href="https://m.blog.naver.com/hhw1990/221394005779">https://m.blog.naver.com/hhw1990/221394005779</a></li>
  <li><a href="https://www.youtube.com/watch?v=UCd6LorxpkY&amp;list=PLqq-6Pq4lTTa-d0iZg41U2RDqECol9C5B&amp;index=6">https://www.youtube.com/watch?v=UCd6LorxpkY&amp;list=PLqq-6Pq4lTTa-d0iZg41U2RDqECol9C5B&amp;index=6</a></li>
  <li><a href="https://sjh836.tistory.com/149">https://sjh836.tistory.com/149</a></li>
  <li><a href="https://edu.goorm.io/learn/lecture/557/%ED%95%9C-%EB%88%88%EC%97%90-%EB%81%9D%EB%82%B4%EB%8A%94-node-js">https://edu.goorm.io/learn/lecture/557/%ED%95%9C-%EB%88%88%EC%97%90-%EB%81%9D%EB%82%B4%EB%8A%94-node-js</a></li>
</ul>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nestjs/nestjs-3-database/"> NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° </a>
    </h1>

    <span class="post-date">01 Feb 2021</span>

    <h1 id="2-nestjs-ë¸”ë¡œê·¸-ë§Œë“¤ê¸°---ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°-postgresqlê³¼-user-ëª¨ë“ˆ">2. NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Postgresql)ê³¼ User ëª¨ë“ˆ</h1>

<hr />

<blockquote>
  <p>ì €ëŠ” ì˜¤ëŠ˜ í¬ìŠ¤íŒ…í•  ë¶„ëŸ‰ì˜ ì•±ì„ ë§Œë“  í›„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…í•˜ê¸° ë•Œë¬¸ì— ì¤‘ê°„ì— ì˜¤ë¥˜ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì˜¤ë¥˜ ë‚´ìš©ê³¼ í•¨ê»˜ ëŒ“ê¸€ì„ ë‹¬ì•„ì£¼ì‹œë©´ ì €ë„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤!!</p>
</blockquote>

<h2 id="-ë°ì´í„°-ë² ì´ìŠ¤-ì—°ê²°í•˜ê¸°-">ğŸ‘Œ ë°ì´í„° ë² ì´ìŠ¤ ì—°ê²°í•˜ê¸° !!</h2>

<h3 id="postgresql-ì„¤ì¹˜">PostgreSQL ì„¤ì¹˜!!</h3>

<p>ì—¬ëŸ¬ë¶„ ë“œë””ì–´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ì‹œê°„ì´ ì™”ìŠµë‹ˆë‹¤!!.
ì‹¤ì œ ì—°ìŠµí•  ë•ŒëŠ” ë°°ì—´ ê°™ì€ ì„ì˜ ì ì¸ ë†ˆì„ ë§Œë“¤ê³  ë‚˜ì„œ í•˜ê¸´í•˜ì§€ë§Œâ€¦ ë°”ë¡œ ì—°ê²°í•´ë³´ì£ !</p>

<p>ì €í¬ëŠ” Postgresql ì„ ì‚¬ìš©í•  ê²ë‹ˆë‹¤!! ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë©ë‹ˆë‹¤!!</p>

<blockquote>
  <p>Postgresql ì€ ì˜¤í”ˆì†ŒìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ë¡œ SQL í‘œì¤€ì„ ì˜ ì§€ì›í•©ë‹ˆë‹¤. ì¼ë‹¨ ë¬´ë£Œì…ë‹ˆë‹¤!!
ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ì •ì‹ ë¬¸ì„œë‚˜ íƒ€ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”. <a href="https://junlab.tistory.com/177">postgresql ì„¤ì¹˜ë°©ë²•</a></p>
</blockquote>

<p>í¸ì˜ë¥¼ ìœ„í•´ pgAdmin íˆ´ì„ ì´ìš©í•˜ì—¬ postgresql ì„ ì œì–´í•˜ê² ìŠµë‹ˆë‹¤.!!</p>

<p>ê¸°ì¡´ì˜ ì„œë²„ (PostgreSQL 13 ì´êµ°ìš” ì €ëŠ”) ë¥¼ ìš°í´ë¦­í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“­ì‹œë‹¤!!
ì €ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„ì„ <code class="language-plaintext highlighter-rouge">nest_blog</code> ë¼ê³  í–ˆìŠµë‹ˆë‹¤!!</p>

<blockquote>
  <p>ì›í•˜ì‹œëŠ” ì„œë²„ë¥¼ ë§Œë“¤ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì…”ë„ ê´œì°®ìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í‚¤ë§ˆ êµ¬ì¡°ì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì •ì˜í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤. NestJSê°€ í•´ì¤„ê±°ê±°ë“ ìš”!!</p>

<h3 id="typeorm-">TypeORM !!</h3>

<p>TypeORM ì€ NodeJS í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ORM (Object Relational Mapping) ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤!!</p>

<blockquote>
  <p>ORM ì€ ê°„ë‹¨íˆ ë§í•´ Object ë¥¼ Database ìŠ¤í‚¤ë§ˆì— ì ì ˆí•˜ê²Œ ì ìš©ì‹œí‚¤ê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë¼ ìƒê°í•˜ë©´ í¸í•©ë‹ˆë‹¤.!!</p>
</blockquote>

<p>ì„¤ì¹˜ ì„¤ì¹˜~ nestjs ë£¨íŠ¸ í´ë”ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ì„¸ìš” !!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$ </span>npm <span class="nb">install </span>typeorm @nestjs/typeorm <span class="nt">--save</span>
</code></pre></div></div>

<p>ì„¤ì¹˜ê°€ ë¬ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">ormconfig.json</code> ì´ë¼ëŠ” íŒŒì¼ì„ ë£¨íŠ¸ í´ë”ì— ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.
ë‚˜ì¤‘ì— TypeORM ëª¨ë“ˆì´ ì´ íŒŒì¼ì„ ì°¸ê³ í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤!!</p>

<p>ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•´ì£¼ì„¸ìš”!!</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="err">ì—¬ëŸ¬ë¶„ì´</span><span class="w"> </span><span class="err">ì„¤ì •í–ˆë˜</span><span class="w"> </span><span class="err">ë¹„ë°€ë²ˆí˜¸!</span><span class="p">,</span><span class="w">
  </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nest_blog"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dist/**/**.entity{.ts,.js}"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"synchronize"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">type</code> : ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê²Œ ë  ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">host</code> : db ì—°ê²° ì£¼ì†Œì…ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">localhost</code> ë¥¼ ì´ìš©í•˜ê³  db ë¥¼ ë‹¤ë¥¸ ë¨¸ì‹ ì—ì„œ ì‹¤í–‰í•œë‹¤ë©´ ê·¸ ë¨¸ì‹ ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì£¼ì†Œë¡œ ë³€ê²½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">port</code> : db ì—°ê²° í¬íŠ¸ ì…ë‹ˆë‹¤. ê¸°ë³¸ì€ <code class="language-plaintext highlighter-rouge">5432</code> ì…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">username</code> : ë³„ ë‹¤ë¥¸ ì„¤ì •ì„ ì•ˆí–ˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">postgres</code> ì…ë‹ˆë‹¤</li>
  <li><code class="language-plaintext highlighter-rouge">password</code> : ì„¤ì¹˜ ê³¼ì •ì—ì„œ ì„¤ì •í–ˆë˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</li>
  <li><code class="language-plaintext highlighter-rouge">database</code> : ìœ„ì—ì„œ ë§Œë“¤ì—ˆë˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì €ëŠ” <code class="language-plaintext highlighter-rouge">nest_blog</code> ë¼ê³  í–ˆìŠµë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">entities</code> : ë°˜ë“œì‹œ <code class="language-plaintext highlighter-rouge">dist</code> ì•„ë˜ì˜ í´ë”ë¡œ ì§€ì •í•´ì£¼ì„¸ìš”. ì•ˆê·¸ëŸ¬ë©´ ì˜¤ë¥˜ë‚  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ì„¤ì •ì˜ ê²½ë¡œì— ìˆëŠ” íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ DB ì—ì„œ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">synchronize</code> : ì´ ì„¤ì •ì„ true ë¡œ í•˜ì‹œë©´ ì•± ì‘ë™ì‹œ DB ìŠ¤í‚¤ë§ˆê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<blockquote>
  <p>ìì„¸í•œ ë‚´ìš©ì€ <a href="https://typeorm.io/#/using-ormconfig">ormconfig íƒë°©í•˜ê¸°!!</a> ì„ ì°¸ì¡°í•´ì£¼ì„¸ìš”~</p>
</blockquote>

<h3 id="app-ëª¨ë“ˆì—ì„œ-import--ê·¸ë¦¬ê³ -ì‹¤í–‰">app ëª¨ë“ˆì—ì„œ import !! ê·¸ë¦¬ê³  ì‹¤í–‰!!</h3>

<p>ì ì´ì œ <code class="language-plaintext highlighter-rouge">app.moudle.ts</code> íŒŒì¼ë¡œ ê°€ì„œ TypeOrmMoudle ì„ import í•´ì¤ì‹œë‹¤!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersModule</span><span class="p">,</span> <span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">()],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ormconfig.json</code> íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ë‹¤ë©´, forRoot í•¨ìˆ˜ ì•ˆì— ì„¤ì • ë‚´ìš©ì„ ì ìœ¼ì…”ì•¼ í•©ë‹ˆë‹¤.!!
íŒŒì¼ë¡œ ê´€ë¦¬í•˜ëŠ”ê²Œ ë” í¸í•˜ê² ì£ ~?</p>

<p>ì ì´ì œ ë£¨íŠ¸ í´ë”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ë´…ì‹œë‹¤!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run start
</code></pre></div></div>

<p>ë³„ ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ì—†ë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ ì—°ê²° ëœê²ë‹ˆë‹¤!! ìš°ë¼í•˜!!!
ì €í¬ëŠ” ì•„ì§ Entityì— ëŒ€í•´ì„œ ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í…Œì´ë¸”ì— ë³„ ë‚´ìš©ì€ ì—†ìŠµë‹ˆë‹¤.</p>

<p>ì´í›„ì— Entity ë¥¼ ë§Œë“  í›„ì—ëŠ” DB ì—ì„œ í…Œì´ë¸”ì„ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì—°ê²°í•´ì£¼ì‹œë©´ ë§Œë“  ë‚´ìš©ì´ ì ìš©ë©ë‹ˆë‹¤!</p>

<h2 id="-user-entity-ë§Œë“¤ê¸°">ğŸ›´ User Entity ë§Œë“¤ê¸°.</h2>

<p>í†¡.</p>

<p>DB ë„ ì—°ê²°í–ˆê² ë‹¤.</p>

<p>í†¡í†¡.</p>

<p>User Entity Template ë„ ìƒì„±í–ˆê² ë‹¤.</p>

<p>í†¡í†¡.</p>

<p>ë‚´ìš©ë§Œ ë„£ìœ¼ë©´ ë˜ë„¤?</p>

<p>ì§!</p>

<p><code class="language-plaintext highlighter-rouge">src/users</code> ì•ˆì˜ êµ¬ì¡°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í•´ì£¼ì„¸ìš”!!
spec íŒŒì¼ë“¤ì€ ì§€ê¸ˆ ì—†ì–´ë„ ë©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>users
â”‚  users.repository.ts
â”‚  users.controller.spec.ts
â”‚  users.controller.ts
â”‚  users.entity.ts
â”‚  users.module.ts
â”‚  users.service.spec.ts
â”‚  users.service.ts
â”‚
â””â”€dto
        create-user.dto.ts
        index.ts
        update-user.dto.ts
</code></pre></div></div>

<p>ìš°ë¦¬ëŠ” User ì˜ ìš”êµ¬ì‚¬í•­ ë§ê²Œ ì ì ˆíˆ Entity ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤. ì™œëƒë©´ ì´ ì•ˆì— ìˆëŠ” ë‚´ìš©ì´ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¡œ ì ìš©ë  ë…€ì„ë“¤ì´ê±°ë“ ìš”!!</p>

<p><a href="https://github.com/Tocktock/nest-practice">ìš”êµ¬ì‚¬í•­ë³´ê¸°</a></p>

<p>ë°”ë¡œ ëª¨ë“  ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±ì‹œí‚¤ê¸°ëŠ” ë³µì¡í•˜ë‹ˆ í•  ìˆ˜ ìˆëŠ”ê±° ë¨¼ì € ì±„ì›Œ ë‚˜ê°‘ì‹œë‹¤!!</p>

<p><code class="language-plaintext highlighter-rouge">users.entity.ts</code> ì•ˆì„ ë‹¤ìŒê³¼ ê°™ì´ ì±„ì›Œì£¼ì„¸ìš”!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BeforeInsert</span><span class="p">,</span> <span class="nx">Column</span><span class="p">,</span> <span class="nx">Entity</span><span class="p">,</span> <span class="nx">PrimaryGeneratedColumn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">argon2</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">argon2</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entity</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserEntity</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">PrimaryGeneratedColumn</span><span class="p">()</span>
  <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">32</span> <span class="p">})</span>
  <span class="nx">username</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">unique</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">BeforeInsert</span><span class="p">()</span>
  <span class="k">async</span> <span class="nx">hashPassword</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">argon2</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">default</span><span class="p">:</span> <span class="dl">""</span> <span class="p">})</span>
  <span class="nx">imageLink</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Entity</code> : ì´ annotation ì´ ìˆìœ¼ë©´ nestjsê°€ ë³´ê³  ìˆë‹¤ê°€ DB ìŠ¤í‚¤ë§ˆ ì ìš©ì„ ìœ„í•´ ì°¸ê³ í•˜ê²Œ ë©ë‹ˆë‹¤!! ì´í›„ repository í´ë˜ìŠ¤ì—ì„œë„ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ê°€ ë©ë‹ˆë‹¤. ê´„í˜¸ì•ˆì— ë„£ì€ ë‚´ìš©ì´ í…Œì´ë¸”ì˜ ì´ë¦„ì´ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">PrimaryGeneratedColumn</code> : ì´ annotionì´ ìˆë‹¤ë©´ ì´ í…Œì´ë¸”ì€ í•´ë‹¹ í•„ë“œê°€ primary key ê°€ ë©ë‹ˆë‹¤. ê´„í˜¸ ì•ˆì— ì•„ë¬´ëŸ° ë‚´ìš©ì„ ë„£ì§€ ì•Šìœ¼ë©´ id ëŠ” auto increment ê°€ ì ìš©ë©ë‹ˆë‹¤.
    <blockquote>
      <p><a href="https://velog.io/@qnfmtm666/series/DevTip">uuid vs auto increment</a></p>
    </blockquote>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Column</code> : ì´ annotion ì´ ìˆìœ¼ë©´ í…Œì´ë¸”ì˜ í•„ë“œë¡œ ë§Œë“¤ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ê´„í˜¸ ì•ˆì— ì—¬ëŸ¬ ì˜µì…˜ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://typeorm.io/#/entities/column-options">ëª¨ë“  ê´„í˜¸ ì•ˆì˜ ì˜µì…˜ ë³´ê¸°</a></li>
  <li><code class="language-plaintext highlighter-rouge">BeforeInsert</code> : ìš” ë…€ì„ì€ ë°ì´í„°ë² ì´ìŠ¤ì— insert í•˜ê¸° ì „ì— ìˆ˜í–‰ë˜ëŠ” ë…€ì„ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³µí˜¸í™” í•  ìˆ˜ ì—†ê²Œ hash í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì €ì¥í•©ì‹œë‹¤.</li>
</ul>

<p>ì•„ì°¸ í•´ì‰¬ í•¨ìˆ˜ë¥¼ ì“°ê¸° ìœ„í•´ argon2 ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>argon2 <span class="nt">--save</span>
</code></pre></div></div>

<h2 id="-repository-ì™€-dto-ë³€ê²½í•˜ê¸°">ğŸ”¨ Repository ì™€ Dto ë³€ê²½í•˜ê¸°!</h2>

<h3 id="repository">Repository</h3>

<p><code class="language-plaintext highlighter-rouge">Repository</code> ëŠ” ìš°ë¦¬ê°€ ë§Œë“  Entity ë¥¼ ê´€ë¦¬(insert, update, delete, load, etc.)í•´ì¤„ ë…€ì„ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">users.repository.ts</code> ì•ˆì˜ ë‚´ìš©ì„ ë‹¤ìŒê³¼ ê°™ì´ ì±„ì›Œì£¼ì„¸ìš”!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">EntityRepository</span><span class="p">,</span> <span class="nx">Repository</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">UserEntity</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./users.entity</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">EntityRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserRepository</span> <span class="kd">extends</span> <span class="nx">Repository</span><span class="o">&lt;</span><span class="nx">UserEntity</span><span class="o">&gt;</span> <span class="p">{}</span>
</code></pre></div></div>

<p>ì—¥? ì´ê²ƒë§Œ í•´ë„ ë˜ëŠ”ê±´ê°€??</p>

<ul>
  <li>ë„¤!!</li>
</ul>

<p>ì´ë ‡ê²Œ Repository ë¥¼ ë§Œë“¤ì–´ì£¼ì‹œë©´ UserEntityì— ëŒ€í•´ ê¸°ë³¸ì ì¸ ì¿¼ë¦¬ë¥¼ ê·¸ëƒ¥ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë³µì¡í•œ ì¿¼ë¦¬ëŠ” ì—¬ê¸°ì„œ ë§Œë“¤ì–´ì£¼ì…”ë„ ë˜ê³  ì´í›„ ë‚˜ì˜¬ query builder ë¡œ í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ ì“°ì…”ë„ ë©ë‹ˆë‹¤!</p>

<h3 id="dto">DTO</h3>

<p><strong>DTO</strong>(Data Transfer Object) ëŠ” ë°ì´í„°ê°€ ì–´ë–¤ êµ¬ì¡°ë¡œ ì „ì†¡ë˜ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” í´ë˜ìŠ¤ ì…ë‹ˆë‹¤.</p>

<p>dto í´ë” ì•ˆì—
<code class="language-plaintext highlighter-rouge">create-user.dto.ts</code> í´ë”ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ì„¸ìš”</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">IsNotEmpty</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">class-validator</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateUserDto</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">username</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">class-validator</code> ëŠ” data ê°€ ì „ì†¡ë  ë•Œ í•´ë‹¹ í•„ë“œê°€ ì ì ˆí•œ ìœ íš¨ì„±ì„ ê°€ì§€ëŠ”ì§€ ê²€ì‚¬í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.</p>

<p>ì ì´ì œ Service ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤!!</p>

<h2 id="-user-service-ë³€ê²½í•˜ê¸°">ğŸ¤— User Service ë³€ê²½í•˜ê¸°!!</h2>

<p>ì êµ¬ì¡°ëŠ” ì¤€ë¹„ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë¡œì§ë§Œ ì˜ ì‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤ í™”ì´íŒ…!!</p>

<p>ë¨¼ì € ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ UserService ìƒì„±ìì— ë‹¤ìŒê³¼ ê°™ì´ ì ì–´ì¤ì‹œë‹¤!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="k">readonly</span> <span class="nx">userRepository</span><span class="p">:</span> <span class="nx">UserRepository</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div></div>

<p>ì ì´ê²ƒ ë§Œìœ¼ë¡œ ê°ì²´ê°€ ì£¼ì…ë¬ìŠµë‹ˆë“œì–´ì–´ì–´!! ì–¼ë§ˆë‚˜ ì¢‹ì•„~!</p>

<h3 id="user-create">User create</h3>

<p><code class="language-plaintext highlighter-rouge">users.service.ts</code> íŒŒì¼ ë‚´ì— create í•¨ìˆ˜ ì•ˆì„ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿”ì£¼ì„¸ìš”!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">createUserDto</span><span class="p">:</span> <span class="nx">CreateUserDto</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">createUserDto</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">getByUserName</span> <span class="o">=</span> <span class="nx">getRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">createQueryBuilder</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.username = :username</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">username</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">byUserName</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByUserName</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">byUserName</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UserName is already exists</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation falied</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">getByEmail</span> <span class="o">=</span> <span class="nx">getRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">createQueryBuilder</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.email = :email</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">byEmail</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByEmail</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">byEmail</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email is already exists</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation falied</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// const thisUser = this.userRepository.findOne({ username: username });</span>
    <span class="c1">// const thisEmail = this.userRepository.findOne({ email: email });</span>

    <span class="c1">// create new user</span>
    <span class="kd">let</span> <span class="nx">newUser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserEntity</span><span class="p">();</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">email</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="nx">password</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">validate_error</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">validate</span><span class="p">(</span><span class="nx">newUser</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validate_error</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">_error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UserInput is not valid check type</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation failed</span><span class="dl">'</span><span class="p">,</span> <span class="nx">_error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newUser</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>ë¨¼ì € username ê³¼ email ì€ ìœ ì¼í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ê²€ì‚¬í•´ë³´ì£ !!</p>

<p>ë¨¼ì € ì‚´í´ë³¼ ê²ƒì€ <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ì…ë‹ˆë‹¤.
typeorm ì€ <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ë¼ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ ì½”ë“œ ì•ˆì—ì„œ SQL ë¬¸ì„ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
ì´ ì½”ë“œë¡œ ì¸í•´ ì‘ì„±ëœ sql ë¬¸ì€ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‹¤ì§ˆì ìœ¼ë¡œ DB ì™€ ë°ì´í„° êµí™˜ì´ ì¼ì–´ë‚˜ë©´ ì‹¤í–‰ ë©ë‹ˆë‹¤.</p>

<p>ë§¨ ì²˜ìŒ ë§Œë“  SQL ë¬¸ì€</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">byEmail</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByEmail</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ ìˆ˜í–‰ ë©ë‹ˆë‹¤. DB ì˜ ì¿¼ë¦¬ ì†ë„ì™€ ìš°ë¦¬ê°€ ë§Œë“  ë°±ì—”ë“œ ì„œë²„ì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì†ë„ ì°¨ì´ê°€ ë§ì´ ë‚˜ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° ì‹ìœ¼ë¡œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.</p>

<p>ë§ˆì°¬ê°€ì§€ë¡œ username ë„ ê²€ì‚¬í•´ì¤ì‹œë‹¤!!</p>

<p>ì‚¬ì‹¤ ì´ ê¸°ëŠ¥ì€ createQueryBuilder ë¥¼ ì•ˆì¨ë„ ë©ë‹ˆë‹¤. Repository ë¥¼ ì‘ì„±í–ˆìœ¼ë¯€ë¡œ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì€ ì´ë¯¸ ì§€ì›ì´ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì˜ˆë“¤ ë“¤ì–´ username ì„ ê¸°ì¤€ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì ìœ¼ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">username</span> <span class="p">});</span>
</code></pre></div></div>

<p>ì´í•´ë¥¼ ë•ê³ ì <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤</p>

<p>ë§ˆì°¬ê°€ì§€ë¡œ findByEmail í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ì‹œë©´</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">async</span> <span class="nx">findByEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>email ê¸°ì¤€ìœ¼ë¡œ ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!!</p>

<h2 id="-module-ì—-import-í•´ì£¼ê¸°">ğŸ”¨ Module ì— import í•´ì£¼ê¸°!!</h2>

<p>ì ê±°ì˜ ë‹¤ ì™”ìŠµë‹ˆë‹¤!!</p>

<p><code class="language-plaintext highlighter-rouge">users.module.ts</code> íŒŒì¼ ì•ˆì— imports ë¶€ë¶„ì— ë‹¤ìŒê³¼ ê°™ì´ ëª¨ë“ˆì„ import í•´ì¤ì‹œë‹¤!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nx">forFeature</span><span class="p">([</span><span class="nx">UserRepository</span><span class="p">])],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersService</span><span class="p">],</span>
  <span class="na">exports</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UsersModule</span> <span class="p">{}</span>
</code></pre></div></div>

<h2 id="-ì´ì œ-ì‹¤í–‰ëœë‹¤">ğŸ˜ƒ ì´ì œ ì‹¤í–‰ëœë‹¤!!</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run start
</code></pre></div></div>

<p>ìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì„ í•©ì‹œë‹¤.
ì˜¤ë¥˜ê°€ ì—†ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¡œê·¸ê°€ ëœ¹ë‹ˆë‹¤!!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [NestFactory] Starting Nest application...
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmModule dependencies initialized +97ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] AppModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmCoreModule dependencies initialized +213ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] UsersModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RoutesResolver] AppController {}: +14ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {, GET} route +18ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RoutesResolver] UsersController {/users}: +10ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users, POST} route +7ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users, GET} route +3ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:email, GET} route +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:id, PUT} route +11ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:id, DELETE} route +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [NestApplication] Nest application successfully started +2ms
</code></pre></div></div>

<p>ìš°í›„ ìš°í›„~ ìš°í›„~ ìš°í›„~ ì„±ê³µ!!
ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤.</p>

<h2 id="-ì•„ì§-í…ŒìŠ¤íŠ¸ê°€-ë‚¨ì•˜ë‹¤">ğŸ¤£ ì•„ì§ í…ŒìŠ¤íŠ¸ê°€ ë‚¨ì•˜ë‹¤!!!</h2>

<p>ì €ëŠ” Rest Client ë¼ëŠ” vscode extension ì„ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. postman, curl ì—¬ëŸ¬ë¶„ì´ í¸í•˜ì‹  íˆ´ì„ ì´ìš©í•´ì£¼ì„¸ìš”!!</p>

<p>ì ë‹¤ìŒê³¼ ê°™ì´ ìš”ì²­ì„ í•˜ë©´!</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="nf">POST</span> <span class="nn">http://localhost:3000/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="s">    Content-Type: application/json</span>

    {
        "username": "manynang",
        "email" : "nono@cat.co.kr",
        "password" : "manyang"
    }
</code></pre></div></div>

<p>ë‹¤ìŒê³¼ ê°™ì´ ë°ì´í„°ê°€ ì¶œë ¥ì´ ë©ë‹ˆë‹¤!!</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: application/json; charset=utf-8</span>
<span class="s">    Content-Length: 179</span>
<span class="s">    ETag: W/"b3-G/i5vHuN9KZDYAV9wTSwyMToetE"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:41:10 GMT</span>
<span class="s">    Connection: close</span>

    {
    "email": "nono@cat.co.kr",
    "password": "$argon2i$v=19$m=4096,t=3,p=1$LthoEnjA4KlaeaE/8YhMPg$2bNUqzjlCqbomBtDTkcYzTHjibaSrjefgJDzJWTvGFQ",
    "username": "manynang",
    "id": 1,
    "imageLink": ""
    }
</code></pre></div></div>

<p>ì›ìŠ¤ .. ë¹„ë°€ë²ˆí˜¸ê°€ ë‚˜ì˜¤ëŠ”êµ°ìš”â€¦ ì´ë˜ì„œ í…ŒìŠ¤íŠ¸ê°€ ì¤‘ìš”í•œê²ë‹ˆë‹¤.</p>

<p>ì €í¬ëŠ” ìœ ì € idë§Œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
UserCreate save í•˜ëŠ” ë¶€ë¶„ì„</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newUser</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</code></pre></div></div>

<p>ì´ì™€ ê°™ì´ ë°”ê¿”ì¤ì‹œë‹¤.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: text/html; charset=utf-8</span>
<span class="s">    Content-Length: 1</span>
<span class="s">    ETag: W/"1-NWoZK3kTsExUV00Ywo1G5jlUKKs"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:50:44 GMT</span>
<span class="s">    Connection: close</span>

    1
</code></pre></div></div>

<p>ì ì„±ê³µ!</p>

<p>ì ë‹¤ì‹œ ìœ„ì— POST ê´€ë ¨ ë¬¸ì„ ë‹¤ì‹œ ë³´ë‚´ë©´?</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: application/json; charset=utf-8</span>
<span class="s">    Content-Length: 92</span>
<span class="s">    ETag: W/"5c-j/u2GjtMeXEpPJw+5WWgYELKwpM"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:54:56 GMT</span>
<span class="s">    Connection: close</span>

    {
    "message": "Input data validation falied",
    "error": {
        "username": "UserName is already exists"
    }
    }
</code></pre></div></div>

<p>ì„±ê³µ~~!!!!
ì¤‘ë³µëœ username ì„ ê±¸ë €ìŠµë‹ˆë‹¤ ã…œã…œ!!</p>

<hr />

<p>ê³ ìƒí–ˆìŠµë‹ˆë‹¤ ã…œã…œ!!!!</p>

<p>ë‹¤ìŒì—ëŠ” ìœ„ ì½”ë“œë¥¼ Refactor í•˜ëŠ” ê³¼ì •ìœ¼ë¡œ ì°¾ì•„ëµ™ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!!
ì˜¤ëŠ˜ë„ ì¦ê±°ìš´ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!!</p>

<p>í”¼ë“œë°±ì€ í•­ìƒ í™˜ì˜ì…ë‹ˆë‹¤.</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-45/"> leetcode Jump Game II ë¬¸ì œí’€ê¸° </a>
    </h1>

    <span class="post-date">30 Jan 2021</span>

    <p>#[leetcode][45] Jump Game II ë¬¸ì œí’€ê¸°!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/jump-game-ii">ë¬¸ì œí’€ëŸ¬ê°€ê¸°âœˆ</a></li>
</ul>

<hr />

<h2 id="-ë¬¸ì œ-ìš”ì•½">ğŸ‘“ ë¬¸ì œ ìš”ì•½</h2>

<p>ì²˜ìŒ ì¸ë±ìŠ¤ì—ì„œ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ì— ë„ë‹¬í•˜ë ¤ë©´ ëª‡ ë²ˆ ì í”„í•´ì•¼í• ê¹Œ?
í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ ìµœëŒ€ ì–¼ë§ˆë‚˜ ë›¸ ìˆ˜ ìˆëŠ”ì§€ëŠ” ì•Œë ¤ì¤„ê²Œ!</p>

<blockquote>
  <p>ìì„¸í•œ ë¬¸ì œ ì„¤ëª…ê³¼ ë¦¿ì½”ë“œ í™ˆí˜ì´ì§€ ì°¸ê³ . <a href="https://leetcode.com/problems/jump-game-ii">ë¬¸ì œí’€ëŸ¬ê°€ê¸°</a></p>
</blockquote>

<h2 id="-ë¬¸ì œ-í’€ì´">ğŸ”‘ ë¬¸ì œ í’€ì´</h2>

<p>ì£¼ì–´ì§€ëŠ” ì¸í’‹ì˜ ê¸¸ì´ê°€ ìµœëŒ€ 30,000 ì´ê¸° ë•Œë¬¸ì— ìµœì†Œ O(nlgn) ê¸°ë²•ì„ ì¨ì•¼ í•©ë‹ˆë‹¤!</p>

<p>ì €ëŠ” íƒìš• ê¸°ë²•ìœ¼ë¡œ í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ ë›°ì—ˆì„ ë•Œ ìµœëŒ€ë¡œ ê°€ëŠ” ë†ˆë§Œ ê³¨ë¼ì„œ ê·¸ëƒ¥ ë›°ì—ˆìŠµë‹ˆë‹¤!</p>

<h2 id="-ì†ŒìŠ¤ì½”ë“œ-ë°-ì†ŒìŠ¤í•´ì„">ğŸ¥½ ì†ŒìŠ¤ì½”ë“œ ë° ì†ŒìŠ¤í•´ì„</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jump</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nums</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">nowPos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">maxNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">dist</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">dist</span> <span class="o">&lt;=</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">dist</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">maxNum</span> <span class="o">&lt;=</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">]</span> <span class="o">||</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">maxNum</span> <span class="o">=</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">];</span>
        <span class="nx">nowPos</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">nowPos</span><span class="p">;</span>
    <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">nowPos</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">count</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-ë¬¸ì œ-í›„ê¸°">ğŸ”¨ ë¬¸ì œ í›„ê¸°</h2>

<p>ì™œ hard ë‚œì´ë„ ì¸ì§€ ì•Œ ìˆ˜ ì—†ëŠ” ë¬¸ì œ!! ë„ì•—!!!</p>

    <hr />
  </div>
  
</div>

<div class="pagination">
  
  <a
    class="pagination-item older"
    href="https://tocktock.github.io/page2"
    >Older</a
  >
   
  <span class="pagination-item newer">Newer</span>
  
</div>
</div>
  
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src="/public/js/script.js"></script>
  </body>
</html>
