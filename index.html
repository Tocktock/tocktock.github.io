<!DOCTYPE html>
<html lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     ì˜ì› &middot; ì›¹ ê°œë°œê³¼ ì¼ìƒ
    
  </title>

  
  <link rel="canonical" href="https://tocktock.github.io/" />
  

  <link rel="stylesheet" href="https://tocktock.github.io/public/css/poole.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/syntax.css" />
  <link rel="stylesheet" href="https://tocktock.github.io/public/css/lanyon.css" />

  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400"
  />

  <link
    rel="apple-touch-icon-precomposed"
    sizes="144x144"
    href="https://tocktock.github.io/public/apple-touch-icon-precomposed.png"
  />
  <link rel="shortcut icon" href="https://tocktock.github.io/public/favicon.ico" />

  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://tocktock.github.io/atom.xml"
  />

  <!-- <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "//www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-178749172-1", "auto");
    ga("send", "pageview");
  </script> -->
</head>


  <body>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" />

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item description">
    <p>Developer with Cat</p>
  </div>

  <nav class="sidebar-nav">
    <a
      class="sidebar-nav-item active"
      href="https://tocktock.github.io/"
      >Home</a
    >
                
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/about/"
        >About me</a
      >
               
    <div>
      <a
        class="sidebar-nav-item"
        href="https://tocktock.github.io/categories/"
        >Categories</a
      >
      
      <ul class="sidebar-categories">
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Algorithms"
            >Algorithms (28)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/Jekyll"
            >Jekyll (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/elasticsearch"
            >elasticsearch (9)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/NestJS"
            >NestJS (3)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/DevTip"
            >DevTip (1)</a
          >
        </li>
         
        <li class="sidebar-categories-item">
          <a href="https://tocktock.github.io/categories/nodejs"
            >nodejs (1)</a
          >
        </li>
        
      </ul>
                                                                   
    </div>

    <a class="sidebar-nav-item" href="https://github.com/Tocktock/tocktock.github.io">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.1.0</span>
  </nav>

  <div class="sidebar-item">
    <p>&copy; 2021. All rights reserved.</p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">ì˜ì›</a>
            <small>ì›¹ ê°œë°œê³¼ ì¼ìƒ</small>
          </h3>
        </div>
      </div>

      <div class="container content"><div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nodejs/nodejs-1-what-is-nodejs/"> Node.js ì˜ íŠ¹ì§•ê³¼ í•œê³„ </a>
    </h1>

    <span class="post-date">01 Feb 2021</span>

    <h2 id="-nodejs-ë“±ì¥í•˜ë‹¤">ğŸ¤— Node.JS ë“±ì¥í•˜ë‹¤!!</h2>

<p>ì´ˆê¸° ì›¹ í˜ì´ì§€ëŠ” ì§€ê¸ˆì²˜ëŸ¼ ë™ì ì´ì§€ ì•Šê³  ì •ì ì´ì—ˆìŠµë‹ˆë‹¤.
ê·¸ëŸ°ë° ë™ì ìœ¼ë¡œ ì¢€ ì›€ì§ì´ë©´ ì¢‹ê² ëŠ”ë°.. í•˜ê³  ë‚˜ì˜¨ ê²ƒì´ Javascript ì…ë‹ˆë‹¤.
Javascript Javascript ëŠ” ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ í†µí•´ DOM Context ë¥¼ ì œì–´í•˜ë©° ë™ì ì¸ ì›¹í˜ì´ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>ì‹œê°„ì´ í˜ëŸ¬ 2008 ë…„ êµ¬ê¸€ì´ í¬ë¡¬ì„ ë°œí‘œí•˜ë©´ì„œ V8 ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ ë§Œë“¤ê²Œ ë©ë‹ˆë‹¤.
ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìƒë‹¹í•œ ìˆ˜ì¤€ì˜ í¼í¬ë¨¼ìŠ¤ë¥¼ ë³´ì´ë©° ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ë¥¸ ë¶„ì•¼ì— ì ìš©í•˜ìëŠ” ì˜ê²¬ì´ ìƒê¸°ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì´í›„ CommonJS í‘œì¤€ì´ ë°œí‘œë˜ê³  ê³§ë°”ë¡œ CommonJS ì™€ V8 ì—”ì§„ì„ ê¸°ë°˜ìœ¼ë¡œ Node.js ê°€ íƒ„ìƒí•©ë‹ˆë‹¤.</p>

<h2 id="-nodejs-ê°€-ë¹›ë‚˜ê¸°-ì‹œì‘í–ˆì–´">ğŸ˜Š Node.js ê°€ ë¹›ë‚˜ê¸° ì‹œì‘í–ˆì–´!!</h2>

<p>Node.js ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li>None Blocking</li>
  <li>Event Driven</li>
  <li>Data Intensive</li>
  <li>I/O Intensive</li>
</ul>

<p>ì‚¬ì‹¤ ìœ„ì˜ íŠ¹ì§• ëª¨ë‘ Node.js ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<h2 id="-ì“°ë ˆë“œ-ê¸°ë°˜-vs-ë¹„ë™ê¸°-ì´ë²¤íŠ¸-ê¸°ë°˜">ğŸ˜ƒ ì“°ë ˆë“œ ê¸°ë°˜ vs ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜</h2>

<p>Node.js ê°€ ê°œë°œëœ ë°°ê²½ê³¼ ëª©ì ì—ëŠ” ë‹¤ìˆ˜ì˜ ì—°ê²°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¹„ìš©ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•˜ëŠ” ê²ƒì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ Multi Thread í™˜ê²½ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.</p>

<p>Multi Thread ê¸°ë°˜ì˜ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì›¹ ì„œë²„ì— ìš”ì²­ì„ í•˜ê²Œ ë˜ë©´ ì„œë²„ì—ì„œëŠ”</p>

<ul>
  <li>ì¼ì •í•œ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ Thread ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ë˜ëŠ”</li>
  <li>Thread pool ì—ì„œ ì ë‹¹í•œ Thread ë¥¼ í•´ë‹¹ ìš”ì²­ì— í• ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<p>ì´ í• ë‹¹ëœ Thread ëŠ” í•´ë‹¹ ìš”ì²­ì´ ì™„ë£Œë  ë•Œ ê¹Œì§€ ì´ ìš”ì²­ì— í• ë‹¹ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì½”ë“œê°€ ìˆ˜í–‰ë˜ëŠ” ì†ë„ì™€ I/O ì¥ì¹˜ì˜ ìˆ˜í–‰ ì†ë„ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Blocking I/O ì— ëŒ€í•œ ë¬¸ì œê°€ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.</p>

<p>Blocking I/O ìì²´ê°€ ë°œìƒì‹œí‚¤ëŠ” ë¬¸ì œëŠ”</p>

<ul>
  <li>I/O ìš”ì²­ì„ í•˜ê³  ì‘ë‹µì´ ì˜¬ ë•Œê¹Œì§€ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³  ì‹œê°„ì„ ë‚­ë¹„í•˜ëŠ” ê²ƒê³¼</li>
  <li>ìŠ¤ì¼€ì¥´ë§ ì²˜ë¦¬ì™€ ë¬¸ë§¥ ì „í™˜ì‹œ CPU ì—°ì‚°ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—</li>
</ul>

<p>ì“°ë ˆë“œê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ì´ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ê°€ ì¼ì–´ë‚œë‹¤ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p>

<p>Node.js ëŠ” Single Thread ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>

<p>ë­ ?? <strong>Single Thread ë©´ ìš”ì²­ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì•„ë¬´ê²ƒë„ ëª»í•˜ì–ì•„!!</strong></p>

<p>ì˜¤.. ì˜¤í•´ì…ë‹ˆë‹¤!!</p>

<p>Node.js ëŠ” <strong>Single Thread ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹</strong> ìœ¼ë¡œ êµ¬ë™ë©ë‹ˆë‹¤.</p>

<p>Node.js ëŠ”</p>

<ul>
  <li>I/O ì‘ì—… ì²˜ë¦¬ì— ëŒ€í•œ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ë‹¤ìŒ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</li>
  <li>ëŒ€ì‹  I/O ì‘ì—…ì´ ì¢…ë£Œë˜ë©´ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³ ,</li>
  <li>ì´ ì´ë²¤íŠ¸ëŠ” í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì˜ ì´ë²¤íŠ¸ íì— ë“±ë¡ë˜ê²Œ ë©ë‹ˆë‹¤.</li>
  <li>ë…¸ë“œê°€ ì´ ì´ë²¤íŠ¸ íë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê³„ì† ê°ì§€í•˜ì—¬ í•´ë‹¹ ì´ë²¤íŠ¸ ì´í›„ ìˆ˜í–‰í•´ì•¼ í•  ì‘ì—…ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<p><strong>ì´ë²¤íŠ¸ ë£¨í”„</strong> ëŠ” ì‘ì—…ì„ ìš”ì²­í•˜ë©´ì„œ ê·¸ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ ì–´ë–¤ ì‘ì—…ì„ ì§„í–‰í• ì§€ì— ëŒ€í•œ ì½œë°±í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ë™ì‘ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ í•´ë‹¹ ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë™ì‘ ë°©ì‹ì„ ë§í•©ë‹ˆë‹¤. ë§Œì•½ HTTP ìš”ì²­ì´ ì„œë²„ì— ì˜¤ë©´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì´ë¥¼ ê°ì§€í•˜ê³  ì ë‹¹í•œ Worker Thread ë¥¼ ìƒì„±í•˜ì—¬ í•´ë‹¹ ìš”ì²­ì„ í• ë‹¹í•œ í›„ ë‹¤ë¥¸ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.</p>

<p>ë‹¤ì‹œ ë§í•´ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì–´ë–¤ ìš”ì²­ì´ ë°œìƒí•˜ë©´ ê·¸ ì‘ì—…ì— ëŒ€í•´ <strong>ì“°ë ˆë“œ ì‹¤í–‰ë§Œì„ ì¼ìœ¼í‚¬ ë¿</strong>ì…ë‹ˆë‹¤. ì´í›„ ì‘ì—…ì„ í• ë‹¹ë°›ì•˜ë˜ í•´ë‹¹ ì“°ë ˆë“œê°€ ëª¨ë“  ì‘ì—…ì„ ë§ˆì¹˜ë©´ ë¯¸ë¦¬ ì „ë‹¬ë°›ì€ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì´ë²¤íŠ¸ ë£¨í”„ë¡œ ì‘ë‹µí•˜ê²Œ ë˜ë©° ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì´ê²ƒì„ ì‹¤í–‰í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê²°ê³¼ë¥¼ ì‘ë‹µí•´ì¤ë‹ˆë‹¤.</p>

<h2 id="-nodejs-ì˜-í•œê³„">ğŸ™€ Node.js ì˜ í•œê³„</h2>

<p>Node.js : <strong>Culculte Intensive</strong> í•œ ë¶„ì•¼ëŠ” ìì‹  ì—†ì–´!!</p>

<p>ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ë´…ì‹œë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100000000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
</code></pre></div></div>

<p>ê°ì´ ì˜¤ì‹­ë‹ˆê¹Œ??</p>

<p>ë‹¤ì‹œ ë§í•˜ìë©´ Node.js ëŠ” Single Thread ê¸°ë°˜ì…ë‹ˆë‹¤. ìœ„ ìƒí™©ê³¼ ê°™ì´ ê¸´ ì‹œê°„ì´ í•„ìš”í•œ ì—°ì‚°ì´ ìˆìœ¼ë©´ ê±°ê¸°ì„œ Block ì´ ë©ë‹ˆë‹¤.</p>

<p>ë°˜ë©´ Multi Thread ê¸°ë°˜ì˜ ì–´ë–¤ Thread ê°€ ìœ„ì™€ ê°™ì€ ìš”ì²­ì„ ë°›ê³  ì—°ì‚°ì„ í•œë‹¤í•´ë„ ì—¬ëŸ¬ Thread ê°€ ìˆìœ¼ë‹ˆ ë‹¤ë¥¸ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>Thread ëŠ” ì‹œë¶„í•  ë˜ëŠ” íŠ¹ì • ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ê¸°ê°„ë™ì•ˆ ìˆ˜í–‰ë˜ê³  Context Switching ì„ í†µí•´ ì‘ì—…ì„ ë¯¸ë£¨ê²Œ ë©ë‹ˆë‹¤.</p>
</blockquote>

<p>ë”°ë¼ì„œ ë‹¨ìˆœíˆ ì—°ì‚°ì— ì§‘ì¤‘ì ì¸ ë¶„ì•¼ì— ëŒ€í•´ì„œëŠ” Node.js ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì–¸ì–´ ë‹¤ë¥¸ ì½”ë“œë¡œ ì‘ì„±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ìš°íšŒí•˜ì‹œëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>

<hr />

<h2 id="-ë§ˆì¹˜ë©°">ğŸ˜­ ë§ˆì¹˜ë©°</h2>

<p>ì‚¬ì‹¤ Node.js í™˜ê²½ì„ ì‚¬ìš©í•˜ë©´ì„œ, ë‹¨ìˆœíˆ ë°±ì—”ë“œë‘ í”„ë¡ íŠ¸ì—”ë“œ ë‘˜ ë‹¤ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹ˆê¹Œ !! ë¼ëŠ” ì§€ì‹ë§Œ ê°€ì§€ê³ </p>

<p>ì™œ Node.js ê°€ ë¬´ì—‡ì„ ëª©ì ìœ¼ë¡œ íƒ„ìƒí–ˆëŠ”ì§€ ì–´ë–¤ì ì— ê°•ì ì„ ê°€ì§€ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ëª°ëë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ìƒê°ë³´ë‹¤ Performance ë„ í›Œë¥­í•˜ë‹¤ëŠ” ê²ƒì— ë†€ëê³  Single Thread ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ ìˆ˜í–‰ê³¼ì •ì— ë‹¤ì‹œ ë†€ëìŠµë‹ˆë‹¤.
ìµœì†Œí•œ ì™œ ì“°ëŠ”ì§€ ì´ í™˜ê²½ì˜ ì¥ì ì´ ë¬´ì—‡ì¸ì§€ëŠ” ì•„ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>Node.js ì§êµ° ë©´ì ‘ì„ ë³´ë©´ì„œ íŠ¹íˆ ë” ë§ì´ ëŠê¼‡ìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ì¶”ê°€ë¡œ, Node.js ë„ ì–´ë–¤ ë¶€ë¶„ì—ì„œëŠ” Multi Thread ìš”ì†Œë¥¼ ì“°ê¸°ë„ í•©ë‹ˆë‹¤.
ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ë‹¤ë¥¸ ë‚´ìš©ê³¼ í•¨ê»˜ ë” ì¢‹ì€ ì •ë³´ë¥¼ ê°€ì§€ê³  ë‹¤ì‹œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.!!</p>

<p>ì¶œì²˜</p>

<ul>
  <li><a href="https://zbulletjournal.tistory.com/85">https://zbulletjournal.tistory.com/85</a></li>
  <li><a href="https://m.blog.naver.com/hhw1990/221394005779">https://m.blog.naver.com/hhw1990/221394005779</a></li>
  <li><a href="https://www.youtube.com/watch?v=UCd6LorxpkY&amp;list=PLqq-6Pq4lTTa-d0iZg41U2RDqECol9C5B&amp;index=6">https://www.youtube.com/watch?v=UCd6LorxpkY&amp;list=PLqq-6Pq4lTTa-d0iZg41U2RDqECol9C5B&amp;index=6</a></li>
  <li><a href="https://sjh836.tistory.com/149">https://sjh836.tistory.com/149</a></li>
  <li><a href="https://edu.goorm.io/learn/lecture/557/%ED%95%9C-%EB%88%88%EC%97%90-%EB%81%9D%EB%82%B4%EB%8A%94-node-js">https://edu.goorm.io/learn/lecture/557/%ED%95%9C-%EB%88%88%EC%97%90-%EB%81%9D%EB%82%B4%EB%8A%94-node-js</a></li>
</ul>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/nestjs/nestjs-3-database/"> NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° </a>
    </h1>

    <span class="post-date">01 Feb 2021</span>

    <h1 id="2-nestjs-ë¸”ë¡œê·¸-ë§Œë“¤ê¸°---ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°-postgresqlê³¼-user-ëª¨ë“ˆ">2. NestJS ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Postgresql)ê³¼ User ëª¨ë“ˆ</h1>

<hr />

<blockquote>
  <p>ì €ëŠ” ì˜¤ëŠ˜ í¬ìŠ¤íŒ…í•  ë¶„ëŸ‰ì˜ ì•±ì„ ë§Œë“  í›„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…í•˜ê¸° ë•Œë¬¸ì— ì¤‘ê°„ì— ì˜¤ë¥˜ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì˜¤ë¥˜ ë‚´ìš©ê³¼ í•¨ê»˜ ëŒ“ê¸€ì„ ë‹¬ì•„ì£¼ì‹œë©´ ì €ë„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤!!</p>
</blockquote>

<h2 id="-ë°ì´í„°-ë² ì´ìŠ¤-ì—°ê²°í•˜ê¸°-">ğŸ‘Œ ë°ì´í„° ë² ì´ìŠ¤ ì—°ê²°í•˜ê¸° !!</h2>

<h3 id="postgresql-ì„¤ì¹˜">PostgreSQL ì„¤ì¹˜!!</h3>

<p>ì—¬ëŸ¬ë¶„ ë“œë””ì–´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ì‹œê°„ì´ ì™”ìŠµë‹ˆë‹¤!!.
ì‹¤ì œ ì—°ìŠµí•  ë•ŒëŠ” ë°°ì—´ ê°™ì€ ì„ì˜ ì ì¸ ë†ˆì„ ë§Œë“¤ê³  ë‚˜ì„œ í•˜ê¸´í•˜ì§€ë§Œâ€¦ ë°”ë¡œ ì—°ê²°í•´ë³´ì£ !</p>

<p>ì €í¬ëŠ” Postgresql ì„ ì‚¬ìš©í•  ê²ë‹ˆë‹¤!! ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë©ë‹ˆë‹¤!!</p>

<blockquote>
  <p>Postgresql ì€ ì˜¤í”ˆì†ŒìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ë¡œ SQL í‘œì¤€ì„ ì˜ ì§€ì›í•©ë‹ˆë‹¤. ì¼ë‹¨ ë¬´ë£Œì…ë‹ˆë‹¤!!
ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ì •ì‹ ë¬¸ì„œë‚˜ íƒ€ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”. <a href="https://junlab.tistory.com/177">postgresql ì„¤ì¹˜ë°©ë²•</a></p>
</blockquote>

<p>í¸ì˜ë¥¼ ìœ„í•´ pgAdmin íˆ´ì„ ì´ìš©í•˜ì—¬ postgresql ì„ ì œì–´í•˜ê² ìŠµë‹ˆë‹¤.!!</p>

<p>ê¸°ì¡´ì˜ ì„œë²„ (PostgreSQL 13 ì´êµ°ìš” ì €ëŠ”) ë¥¼ ìš°í´ë¦­í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“­ì‹œë‹¤!!
ì €ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„ì„ <code class="language-plaintext highlighter-rouge">nest_blog</code> ë¼ê³  í–ˆìŠµë‹ˆë‹¤!!</p>

<blockquote>
  <p>ì›í•˜ì‹œëŠ” ì„œë²„ë¥¼ ë§Œë“¤ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì…”ë„ ê´œì°®ìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í‚¤ë§ˆ êµ¬ì¡°ì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì •ì˜í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤. NestJSê°€ í•´ì¤„ê±°ê±°ë“ ìš”!!</p>

<h3 id="typeorm-">TypeORM !!</h3>

<p>TypeORM ì€ NodeJS í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ORM (Object Relational Mapping) ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤!!</p>

<blockquote>
  <p>ORM ì€ ê°„ë‹¨íˆ ë§í•´ Object ë¥¼ Database ìŠ¤í‚¤ë§ˆì— ì ì ˆí•˜ê²Œ ì ìš©ì‹œí‚¤ê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë¼ ìƒê°í•˜ë©´ í¸í•©ë‹ˆë‹¤.!!</p>
</blockquote>

<p>ì„¤ì¹˜ ì„¤ì¹˜~ nestjs ë£¨íŠ¸ í´ë”ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ì„¸ìš” !!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">$ </span>npm <span class="nb">install </span>typeorm @nestjs/typeorm <span class="nt">--save</span>
</code></pre></div></div>

<p>ì„¤ì¹˜ê°€ ë¬ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">ormconfig.json</code> ì´ë¼ëŠ” íŒŒì¼ì„ ë£¨íŠ¸ í´ë”ì— ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.
ë‚˜ì¤‘ì— TypeORM ëª¨ë“ˆì´ ì´ íŒŒì¼ì„ ì°¸ê³ í•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤!!</p>

<p>ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•´ì£¼ì„¸ìš”!!</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="err">ì—¬ëŸ¬ë¶„ì´</span><span class="w"> </span><span class="err">ì„¤ì •í–ˆë˜</span><span class="w"> </span><span class="err">ë¹„ë°€ë²ˆí˜¸!</span><span class="p">,</span><span class="w">
  </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nest_blog"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dist/**/**.entity{.ts,.js}"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"synchronize"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">type</code> : ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê²Œ ë  ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">host</code> : db ì—°ê²° ì£¼ì†Œì…ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">localhost</code> ë¥¼ ì´ìš©í•˜ê³  db ë¥¼ ë‹¤ë¥¸ ë¨¸ì‹ ì—ì„œ ì‹¤í–‰í•œë‹¤ë©´ ê·¸ ë¨¸ì‹ ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ì£¼ì†Œë¡œ ë³€ê²½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">port</code> : db ì—°ê²° í¬íŠ¸ ì…ë‹ˆë‹¤. ê¸°ë³¸ì€ <code class="language-plaintext highlighter-rouge">5432</code> ì…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">username</code> : ë³„ ë‹¤ë¥¸ ì„¤ì •ì„ ì•ˆí–ˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">postgres</code> ì…ë‹ˆë‹¤</li>
  <li><code class="language-plaintext highlighter-rouge">password</code> : ì„¤ì¹˜ ê³¼ì •ì—ì„œ ì„¤ì •í–ˆë˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</li>
  <li><code class="language-plaintext highlighter-rouge">database</code> : ìœ„ì—ì„œ ë§Œë“¤ì—ˆë˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì €ëŠ” <code class="language-plaintext highlighter-rouge">nest_blog</code> ë¼ê³  í–ˆìŠµë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">entities</code> : ë°˜ë“œì‹œ <code class="language-plaintext highlighter-rouge">dist</code> ì•„ë˜ì˜ í´ë”ë¡œ ì§€ì •í•´ì£¼ì„¸ìš”. ì•ˆê·¸ëŸ¬ë©´ ì˜¤ë¥˜ë‚  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ì„¤ì •ì˜ ê²½ë¡œì— ìˆëŠ” íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ DB ì—ì„œ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">synchronize</code> : ì´ ì„¤ì •ì„ true ë¡œ í•˜ì‹œë©´ ì•± ì‘ë™ì‹œ DB ìŠ¤í‚¤ë§ˆê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<blockquote>
  <p>ìì„¸í•œ ë‚´ìš©ì€ <a href="https://typeorm.io/#/using-ormconfig">ormconfig íƒë°©í•˜ê¸°!!</a> ì„ ì°¸ì¡°í•´ì£¼ì„¸ìš”~</p>
</blockquote>

<h3 id="app-ëª¨ë“ˆì—ì„œ-import--ê·¸ë¦¬ê³ -ì‹¤í–‰">app ëª¨ë“ˆì—ì„œ import !! ê·¸ë¦¬ê³  ì‹¤í–‰!!</h3>

<p>ì ì´ì œ <code class="language-plaintext highlighter-rouge">app.moudle.ts</code> íŒŒì¼ë¡œ ê°€ì„œ TypeOrmMoudle ì„ import í•´ì¤ì‹œë‹¤!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersModule</span><span class="p">,</span> <span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">()],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ormconfig.json</code> íŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ë‹¤ë©´, forRoot í•¨ìˆ˜ ì•ˆì— ì„¤ì • ë‚´ìš©ì„ ì ìœ¼ì…”ì•¼ í•©ë‹ˆë‹¤.!!
íŒŒì¼ë¡œ ê´€ë¦¬í•˜ëŠ”ê²Œ ë” í¸í•˜ê² ì£ ~?</p>

<p>ì ì´ì œ ë£¨íŠ¸ í´ë”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ë´…ì‹œë‹¤!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run start
</code></pre></div></div>

<p>ë³„ ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ì—†ë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ ì—°ê²° ëœê²ë‹ˆë‹¤!! ìš°ë¼í•˜!!!
ì €í¬ëŠ” ì•„ì§ Entityì— ëŒ€í•´ì„œ ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í…Œì´ë¸”ì— ë³„ ë‚´ìš©ì€ ì—†ìŠµë‹ˆë‹¤.</p>

<p>ì´í›„ì— Entity ë¥¼ ë§Œë“  í›„ì—ëŠ” DB ì—ì„œ í…Œì´ë¸”ì„ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì—°ê²°í•´ì£¼ì‹œë©´ ë§Œë“  ë‚´ìš©ì´ ì ìš©ë©ë‹ˆë‹¤!</p>

<h2 id="-user-entity-ë§Œë“¤ê¸°">ğŸ›´ User Entity ë§Œë“¤ê¸°.</h2>

<p>í†¡.</p>

<p>DB ë„ ì—°ê²°í–ˆê² ë‹¤.</p>

<p>í†¡í†¡.</p>

<p>User Entity Template ë„ ìƒì„±í–ˆê² ë‹¤.</p>

<p>í†¡í†¡.</p>

<p>ë‚´ìš©ë§Œ ë„£ìœ¼ë©´ ë˜ë„¤?</p>

<p>ì§!</p>

<p><code class="language-plaintext highlighter-rouge">src/users</code> ì•ˆì˜ êµ¬ì¡°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í•´ì£¼ì„¸ìš”!!
spec íŒŒì¼ë“¤ì€ ì§€ê¸ˆ ì—†ì–´ë„ ë©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>users
â”‚  users.repository.ts
â”‚  users.controller.spec.ts
â”‚  users.controller.ts
â”‚  users.entity.ts
â”‚  users.module.ts
â”‚  users.service.spec.ts
â”‚  users.service.ts
â”‚
â””â”€dto
        create-user.dto.ts
        index.ts
        update-user.dto.ts
</code></pre></div></div>

<p>ìš°ë¦¬ëŠ” User ì˜ ìš”êµ¬ì‚¬í•­ ë§ê²Œ ì ì ˆíˆ Entity ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤. ì™œëƒë©´ ì´ ì•ˆì— ìˆëŠ” ë‚´ìš©ì´ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¡œ ì ìš©ë  ë…€ì„ë“¤ì´ê±°ë“ ìš”!!</p>

<p><a href="https://github.com/Tocktock/nest-practice">ìš”êµ¬ì‚¬í•­ë³´ê¸°</a></p>

<p>ë°”ë¡œ ëª¨ë“  ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±ì‹œí‚¤ê¸°ëŠ” ë³µì¡í•˜ë‹ˆ í•  ìˆ˜ ìˆëŠ”ê±° ë¨¼ì € ì±„ì›Œ ë‚˜ê°‘ì‹œë‹¤!!</p>

<p><code class="language-plaintext highlighter-rouge">users.entity.ts</code> ì•ˆì„ ë‹¤ìŒê³¼ ê°™ì´ ì±„ì›Œì£¼ì„¸ìš”!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BeforeInsert</span><span class="p">,</span> <span class="nx">Column</span><span class="p">,</span> <span class="nx">Entity</span><span class="p">,</span> <span class="nx">PrimaryGeneratedColumn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">argon2</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">argon2</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entity</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserEntity</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">PrimaryGeneratedColumn</span><span class="p">()</span>
  <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">32</span> <span class="p">})</span>
  <span class="nx">username</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">unique</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">BeforeInsert</span><span class="p">()</span>
  <span class="k">async</span> <span class="nx">hashPassword</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">argon2</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">({</span> <span class="na">default</span><span class="p">:</span> <span class="dl">""</span> <span class="p">})</span>
  <span class="nx">imageLink</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Entity</code> : ì´ annotation ì´ ìˆìœ¼ë©´ nestjsê°€ ë³´ê³  ìˆë‹¤ê°€ DB ìŠ¤í‚¤ë§ˆ ì ìš©ì„ ìœ„í•´ ì°¸ê³ í•˜ê²Œ ë©ë‹ˆë‹¤!! ì´í›„ repository í´ë˜ìŠ¤ì—ì„œë„ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ê°€ ë©ë‹ˆë‹¤. ê´„í˜¸ì•ˆì— ë„£ì€ ë‚´ìš©ì´ í…Œì´ë¸”ì˜ ì´ë¦„ì´ ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">PrimaryGeneratedColumn</code> : ì´ annotionì´ ìˆë‹¤ë©´ ì´ í…Œì´ë¸”ì€ í•´ë‹¹ í•„ë“œê°€ primary key ê°€ ë©ë‹ˆë‹¤. ê´„í˜¸ ì•ˆì— ì•„ë¬´ëŸ° ë‚´ìš©ì„ ë„£ì§€ ì•Šìœ¼ë©´ id ëŠ” auto increment ê°€ ì ìš©ë©ë‹ˆë‹¤.
    <blockquote>
      <p><a href="https://velog.io/@qnfmtm666/series/DevTip">uuid vs auto increment</a></p>
    </blockquote>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Column</code> : ì´ annotion ì´ ìˆìœ¼ë©´ í…Œì´ë¸”ì˜ í•„ë“œë¡œ ë§Œë“¤ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ê´„í˜¸ ì•ˆì— ì—¬ëŸ¬ ì˜µì…˜ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://typeorm.io/#/entities/column-options">ëª¨ë“  ê´„í˜¸ ì•ˆì˜ ì˜µì…˜ ë³´ê¸°</a></li>
  <li><code class="language-plaintext highlighter-rouge">BeforeInsert</code> : ìš” ë…€ì„ì€ ë°ì´í„°ë² ì´ìŠ¤ì— insert í•˜ê¸° ì „ì— ìˆ˜í–‰ë˜ëŠ” ë…€ì„ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³µí˜¸í™” í•  ìˆ˜ ì—†ê²Œ hash í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì €ì¥í•©ì‹œë‹¤.</li>
</ul>

<p>ì•„ì°¸ í•´ì‰¬ í•¨ìˆ˜ë¥¼ ì“°ê¸° ìœ„í•´ argon2 ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>argon2 <span class="nt">--save</span>
</code></pre></div></div>

<h2 id="-repository-ì™€-dto-ë³€ê²½í•˜ê¸°">ğŸ”¨ Repository ì™€ Dto ë³€ê²½í•˜ê¸°!</h2>

<h3 id="repository">Repository</h3>

<p><code class="language-plaintext highlighter-rouge">Repository</code> ëŠ” ìš°ë¦¬ê°€ ë§Œë“  Entity ë¥¼ ê´€ë¦¬(insert, update, delete, load, etc.)í•´ì¤„ ë…€ì„ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">users.repository.ts</code> ì•ˆì˜ ë‚´ìš©ì„ ë‹¤ìŒê³¼ ê°™ì´ ì±„ì›Œì£¼ì„¸ìš”!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">EntityRepository</span><span class="p">,</span> <span class="nx">Repository</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">UserEntity</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./users.entity</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">EntityRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UserRepository</span> <span class="kd">extends</span> <span class="nx">Repository</span><span class="o">&lt;</span><span class="nx">UserEntity</span><span class="o">&gt;</span> <span class="p">{}</span>
</code></pre></div></div>

<p>ì—¥? ì´ê²ƒë§Œ í•´ë„ ë˜ëŠ”ê±´ê°€??</p>

<ul>
  <li>ë„¤!!</li>
</ul>

<p>ì´ë ‡ê²Œ Repository ë¥¼ ë§Œë“¤ì–´ì£¼ì‹œë©´ UserEntityì— ëŒ€í•´ ê¸°ë³¸ì ì¸ ì¿¼ë¦¬ë¥¼ ê·¸ëƒ¥ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë³µì¡í•œ ì¿¼ë¦¬ëŠ” ì—¬ê¸°ì„œ ë§Œë“¤ì–´ì£¼ì…”ë„ ë˜ê³  ì´í›„ ë‚˜ì˜¬ query builder ë¡œ í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ ì“°ì…”ë„ ë©ë‹ˆë‹¤!</p>

<h3 id="dto">DTO</h3>

<p><strong>DTO</strong>(Data Transfer Object) ëŠ” ë°ì´í„°ê°€ ì–´ë–¤ êµ¬ì¡°ë¡œ ì „ì†¡ë˜ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” í´ë˜ìŠ¤ ì…ë‹ˆë‹¤.</p>

<p>dto í´ë” ì•ˆì—
<code class="language-plaintext highlighter-rouge">create-user.dto.ts</code> í´ë”ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ì„¸ìš”</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">IsNotEmpty</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">class-validator</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateUserDto</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">username</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">IsNotEmpty</span><span class="p">()</span>
  <span class="k">readonly</span> <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">class-validator</code> ëŠ” data ê°€ ì „ì†¡ë  ë•Œ í•´ë‹¹ í•„ë“œê°€ ì ì ˆí•œ ìœ íš¨ì„±ì„ ê°€ì§€ëŠ”ì§€ ê²€ì‚¬í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.</p>

<p>ì ì´ì œ Service ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤!!</p>

<h2 id="-user-service-ë³€ê²½í•˜ê¸°">ğŸ¤— User Service ë³€ê²½í•˜ê¸°!!</h2>

<p>ì êµ¬ì¡°ëŠ” ì¤€ë¹„ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë¡œì§ë§Œ ì˜ ì‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤ í™”ì´íŒ…!!</p>

<p>ë¨¼ì € ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ UserService ìƒì„±ìì— ë‹¤ìŒê³¼ ê°™ì´ ì ì–´ì¤ì‹œë‹¤!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="k">readonly</span> <span class="nx">userRepository</span><span class="p">:</span> <span class="nx">UserRepository</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div></div>

<p>ì ì´ê²ƒ ë§Œìœ¼ë¡œ ê°ì²´ê°€ ì£¼ì…ë¬ìŠµë‹ˆë“œì–´ì–´ì–´!! ì–¼ë§ˆë‚˜ ì¢‹ì•„~!</p>

<h3 id="user-create">User create</h3>

<p><code class="language-plaintext highlighter-rouge">users.service.ts</code> íŒŒì¼ ë‚´ì— create í•¨ìˆ˜ ì•ˆì„ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿”ì£¼ì„¸ìš”!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">createUserDto</span><span class="p">:</span> <span class="nx">CreateUserDto</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">createUserDto</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">getByUserName</span> <span class="o">=</span> <span class="nx">getRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">createQueryBuilder</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.username = :username</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">username</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">byUserName</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByUserName</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">byUserName</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UserName is already exists</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation falied</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">getByEmail</span> <span class="o">=</span> <span class="nx">getRepository</span><span class="p">(</span><span class="nx">UserEntity</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">createQueryBuilder</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="dl">'</span><span class="s1">user.email = :email</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">byEmail</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByEmail</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">byEmail</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email is already exists</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation falied</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// const thisUser = this.userRepository.findOne({ username: username });</span>
    <span class="c1">// const thisEmail = this.userRepository.findOne({ email: email });</span>

    <span class="c1">// create new user</span>
    <span class="kd">let</span> <span class="nx">newUser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserEntity</span><span class="p">();</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">email</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="nx">password</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">validate_error</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">validate</span><span class="p">(</span><span class="nx">newUser</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validate_error</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">_error</span> <span class="o">=</span> <span class="p">{</span> <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UserInput is not valid check type</span><span class="dl">'</span> <span class="p">};</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpException</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Input data validation failed</span><span class="dl">'</span><span class="p">,</span> <span class="nx">_error</span> <span class="p">},</span>
        <span class="nx">HttpStatus</span><span class="p">.</span><span class="nx">BAD_REQUEST</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newUser</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>ë¨¼ì € username ê³¼ email ì€ ìœ ì¼í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ê²€ì‚¬í•´ë³´ì£ !!</p>

<p>ë¨¼ì € ì‚´í´ë³¼ ê²ƒì€ <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ì…ë‹ˆë‹¤.
typeorm ì€ <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ë¼ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ ì½”ë“œ ì•ˆì—ì„œ SQL ë¬¸ì„ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
ì´ ì½”ë“œë¡œ ì¸í•´ ì‘ì„±ëœ sql ë¬¸ì€ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‹¤ì§ˆì ìœ¼ë¡œ DB ì™€ ë°ì´í„° êµí™˜ì´ ì¼ì–´ë‚˜ë©´ ì‹¤í–‰ ë©ë‹ˆë‹¤.</p>

<p>ë§¨ ì²˜ìŒ ë§Œë“  SQL ë¬¸ì€</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">byEmail</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getByEmail</span><span class="p">.</span><span class="nx">getOne</span><span class="p">();</span>
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ ìˆ˜í–‰ ë©ë‹ˆë‹¤. DB ì˜ ì¿¼ë¦¬ ì†ë„ì™€ ìš°ë¦¬ê°€ ë§Œë“  ë°±ì—”ë“œ ì„œë²„ì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì†ë„ ì°¨ì´ê°€ ë§ì´ ë‚˜ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° ì‹ìœ¼ë¡œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.</p>

<p>ë§ˆì°¬ê°€ì§€ë¡œ username ë„ ê²€ì‚¬í•´ì¤ì‹œë‹¤!!</p>

<p>ì‚¬ì‹¤ ì´ ê¸°ëŠ¥ì€ createQueryBuilder ë¥¼ ì•ˆì¨ë„ ë©ë‹ˆë‹¤. Repository ë¥¼ ì‘ì„±í–ˆìœ¼ë¯€ë¡œ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì€ ì´ë¯¸ ì§€ì›ì´ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì˜ˆë“¤ ë“¤ì–´ username ì„ ê¸°ì¤€ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì ìœ¼ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">username</span><span class="p">:</span> <span class="nx">username</span> <span class="p">});</span>
</code></pre></div></div>

<p>ì´í•´ë¥¼ ë•ê³ ì <code class="language-plaintext highlighter-rouge">createQueryBuilder</code> ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤</p>

<p>ë§ˆì°¬ê°€ì§€ë¡œ findByEmail í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ì‹œë©´</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">async</span> <span class="nx">findByEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>email ê¸°ì¤€ìœ¼ë¡œ ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!!</p>

<h2 id="-module-ì—-import-í•´ì£¼ê¸°">ğŸ”¨ Module ì— import í•´ì£¼ê¸°!!</h2>

<p>ì ê±°ì˜ ë‹¤ ì™”ìŠµë‹ˆë‹¤!!</p>

<p><code class="language-plaintext highlighter-rouge">users.module.ts</code> íŒŒì¼ ì•ˆì— imports ë¶€ë¶„ì— ë‹¤ìŒê³¼ ê°™ì´ ëª¨ë“ˆì„ import í•´ì¤ì‹œë‹¤!!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nx">forFeature</span><span class="p">([</span><span class="nx">UserRepository</span><span class="p">])],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersService</span><span class="p">],</span>
  <span class="na">exports</span><span class="p">:</span> <span class="p">[</span><span class="nx">UsersService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">UsersModule</span> <span class="p">{}</span>
</code></pre></div></div>

<h2 id="-ì´ì œ-ì‹¤í–‰ëœë‹¤">ğŸ˜ƒ ì´ì œ ì‹¤í–‰ëœë‹¤!!</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run start
</code></pre></div></div>

<p>ìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì„ í•©ì‹œë‹¤.
ì˜¤ë¥˜ê°€ ì—†ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¡œê·¸ê°€ ëœ¹ë‹ˆë‹¤!!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [NestFactory] Starting Nest application...
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmModule dependencies initialized +97ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] AppModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmCoreModule dependencies initialized +213ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] TypeOrmModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [InstanceLoader] UsersModule dependencies initialized +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RoutesResolver] AppController {}: +14ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {, GET} route +18ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RoutesResolver] UsersController {/users}: +10ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users, POST} route +7ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users, GET} route +3ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:email, GET} route +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:id, PUT} route +11ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [RouterExplorer] Mapped {/users/:id, DELETE} route +1ms
[Nest] 33080   - 2021-02-01 2:36:58 â”œF10: PMâ”¤   [NestApplication] Nest application successfully started +2ms
</code></pre></div></div>

<p>ìš°í›„ ìš°í›„~ ìš°í›„~ ìš°í›„~ ì„±ê³µ!!
ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤.</p>

<h2 id="-ì•„ì§-í…ŒìŠ¤íŠ¸ê°€-ë‚¨ì•˜ë‹¤">ğŸ¤£ ì•„ì§ í…ŒìŠ¤íŠ¸ê°€ ë‚¨ì•˜ë‹¤!!!</h2>

<p>ì €ëŠ” Rest Client ë¼ëŠ” vscode extension ì„ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. postman, curl ì—¬ëŸ¬ë¶„ì´ í¸í•˜ì‹  íˆ´ì„ ì´ìš©í•´ì£¼ì„¸ìš”!!</p>

<p>ì ë‹¤ìŒê³¼ ê°™ì´ ìš”ì²­ì„ í•˜ë©´!</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="nf">POST</span> <span class="nn">http://localhost:3000/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="s">    Content-Type: application/json</span>

    {
        "username": "manynang",
        "email" : "nono@cat.co.kr",
        "password" : "manyang"
    }
</code></pre></div></div>

<p>ë‹¤ìŒê³¼ ê°™ì´ ë°ì´í„°ê°€ ì¶œë ¥ì´ ë©ë‹ˆë‹¤!!</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: application/json; charset=utf-8</span>
<span class="s">    Content-Length: 179</span>
<span class="s">    ETag: W/"b3-G/i5vHuN9KZDYAV9wTSwyMToetE"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:41:10 GMT</span>
<span class="s">    Connection: close</span>

    {
    "email": "nono@cat.co.kr",
    "password": "$argon2i$v=19$m=4096,t=3,p=1$LthoEnjA4KlaeaE/8YhMPg$2bNUqzjlCqbomBtDTkcYzTHjibaSrjefgJDzJWTvGFQ",
    "username": "manynang",
    "id": 1,
    "imageLink": ""
    }
</code></pre></div></div>

<p>ì›ìŠ¤ .. ë¹„ë°€ë²ˆí˜¸ê°€ ë‚˜ì˜¤ëŠ”êµ°ìš”â€¦ ì´ë˜ì„œ í…ŒìŠ¤íŠ¸ê°€ ì¤‘ìš”í•œê²ë‹ˆë‹¤.</p>

<p>ì €í¬ëŠ” ìœ ì € idë§Œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
UserCreate save í•˜ëŠ” ë¶€ë¶„ì„</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newUser</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">v</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</code></pre></div></div>

<p>ì´ì™€ ê°™ì´ ë°”ê¿”ì¤ì‹œë‹¤.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: text/html; charset=utf-8</span>
<span class="s">    Content-Length: 1</span>
<span class="s">    ETag: W/"1-NWoZK3kTsExUV00Ywo1G5jlUKKs"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:50:44 GMT</span>
<span class="s">    Connection: close</span>

    1
</code></pre></div></div>

<p>ì ì„±ê³µ!</p>

<p>ì ë‹¤ì‹œ ìœ„ì— POST ê´€ë ¨ ë¬¸ì„ ë‹¤ì‹œ ë³´ë‚´ë©´?</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">    </span><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="s">    X-Powered-By: Express</span>
<span class="s">    Content-Type: application/json; charset=utf-8</span>
<span class="s">    Content-Length: 92</span>
<span class="s">    ETag: W/"5c-j/u2GjtMeXEpPJw+5WWgYELKwpM"</span>
<span class="s">    Date: Mon, 01 Feb 2021 05:54:56 GMT</span>
<span class="s">    Connection: close</span>

    {
    "message": "Input data validation falied",
    "error": {
        "username": "UserName is already exists"
    }
    }
</code></pre></div></div>

<p>ì„±ê³µ~~!!!!
ì¤‘ë³µëœ username ì„ ê±¸ë €ìŠµë‹ˆë‹¤ ã…œã…œ!!</p>

<hr />

<p>ê³ ìƒí–ˆìŠµë‹ˆë‹¤ ã…œã…œ!!!!</p>

<p>ë‹¤ìŒì—ëŠ” ìœ„ ì½”ë“œë¥¼ Refactor í•˜ëŠ” ê³¼ì •ìœ¼ë¡œ ì°¾ì•„ëµ™ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!!
ì˜¤ëŠ˜ë„ ì¦ê±°ìš´ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!!</p>

<p>í”¼ë“œë°±ì€ í•­ìƒ í™˜ì˜ì…ë‹ˆë‹¤.</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-45/"> leetcode Jump Game II ë¬¸ì œí’€ê¸° </a>
    </h1>

    <span class="post-date">30 Jan 2021</span>

    <p>#[leetcode][45] Jump Game II ë¬¸ì œí’€ê¸°!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/jump-game-ii">ë¬¸ì œí’€ëŸ¬ê°€ê¸°âœˆ</a></li>
</ul>

<hr />

<h2 id="-ë¬¸ì œ-ìš”ì•½">ğŸ‘“ ë¬¸ì œ ìš”ì•½</h2>

<p>ì²˜ìŒ ì¸ë±ìŠ¤ì—ì„œ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ì— ë„ë‹¬í•˜ë ¤ë©´ ëª‡ ë²ˆ ì í”„í•´ì•¼í• ê¹Œ?
í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ ìµœëŒ€ ì–¼ë§ˆë‚˜ ë›¸ ìˆ˜ ìˆëŠ”ì§€ëŠ” ì•Œë ¤ì¤„ê²Œ!</p>

<blockquote>
  <p>ìì„¸í•œ ë¬¸ì œ ì„¤ëª…ê³¼ ë¦¿ì½”ë“œ í™ˆí˜ì´ì§€ ì°¸ê³ . <a href="https://leetcode.com/problems/jump-game-ii">ë¬¸ì œí’€ëŸ¬ê°€ê¸°</a></p>
</blockquote>

<h2 id="-ë¬¸ì œ-í’€ì´">ğŸ”‘ ë¬¸ì œ í’€ì´</h2>

<p>ì£¼ì–´ì§€ëŠ” ì¸í’‹ì˜ ê¸¸ì´ê°€ ìµœëŒ€ 30,000 ì´ê¸° ë•Œë¬¸ì— ìµœì†Œ O(nlgn) ê¸°ë²•ì„ ì¨ì•¼ í•©ë‹ˆë‹¤!</p>

<p>ì €ëŠ” íƒìš• ê¸°ë²•ìœ¼ë¡œ í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ ë›°ì—ˆì„ ë•Œ ìµœëŒ€ë¡œ ê°€ëŠ” ë†ˆë§Œ ê³¨ë¼ì„œ ê·¸ëƒ¥ ë›°ì—ˆìŠµë‹ˆë‹¤!</p>

<h2 id="-ì†ŒìŠ¤ì½”ë“œ-ë°-ì†ŒìŠ¤í•´ì„">ğŸ¥½ ì†ŒìŠ¤ì½”ë“œ ë° ì†ŒìŠ¤í•´ì„</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jump</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nums</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">nowPos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">maxNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">dist</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">dist</span> <span class="o">&lt;=</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">dist</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">maxNum</span> <span class="o">&lt;=</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">]</span> <span class="o">||</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">maxNum</span> <span class="o">=</span> <span class="nx">dist</span> <span class="o">+</span> <span class="nx">nums</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">];</span>
        <span class="nx">nowPos</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">nowPos</span><span class="p">;</span>
    <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">nowPos</span> <span class="o">&gt;=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">count</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-ë¬¸ì œ-í›„ê¸°">ğŸ”¨ ë¬¸ì œ í›„ê¸°</h2>

<p>ì™œ hard ë‚œì´ë„ ì¸ì§€ ì•Œ ìˆ˜ ì—†ëŠ” ë¬¸ì œ!! ë„ì•—!!!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/algorithms/algorithms-leetcode-44/"> leetcode Wildcard Matching ë¬¸ì œí’€ê¸° </a>
    </h1>

    <span class="post-date">30 Jan 2021</span>

    <p>#[leetcode][44] Wildcard Matching ë¬¸ì œí’€ê¸°!</p>

<hr />

<ul>
  <li><a href="https://leetcode.com/problems/wildcard-matching">ë¬¸ì œí’€ëŸ¬ê°€ê¸°âœˆ</a></li>
</ul>

<hr />

<h2 id="-ë¬¸ì œ-ìš”ì•½">ğŸ‘“ ë¬¸ì œ ìš”ì•½</h2>

<p>ê°„ë‹¨í•œ ì •ê·œì‹ íŒ¨í„´ì„ ì¤„ê²Œ.</p>

<ul>
  <li><strong>â€™?â€™</strong> ì´ê±´ í•˜ë‚˜ì˜ ë¬¸ìë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë†ˆì´ì•¼.</li>
  <li><strong>â€™*â€˜</strong> ì„ë§ˆ ì´ê±°ëŠ” ë¹ˆ ë¬¸ìë¥¼ í¬í•¨í•´ì„œ ë¬¸ìì—´ì„ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë†ˆì´ì•¼.</li>
</ul>

<p>ì ì´ì œ ë‚´ê°€ ë¬¸ìì—´ì„ ì¤„í…Œë‹ˆê¹Œ ì´ì „ì— ì¤€ íŒ¨í„´ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë†ˆì¸ì§€ íŒë‹¨í•´ì¤˜!</p>

<blockquote>
  <p>ìì„¸í•œ ë¬¸ì œ ì„¤ëª…ê³¼ ë¦¿ì½”ë“œ í™ˆí˜ì´ì§€ ì°¸ê³ . <a href="https://leetcode.com/problems/wildcard-matching">ë¬¸ì œí’€ëŸ¬ê°€ê¸°</a></p>
</blockquote>

<h2 id="-ë¬¸ì œ-í’€ì´">ğŸ”‘ ë¬¸ì œ í’€ì´</h2>

<p>ë¬¸ì œì—ì„œ ë¬¸ìì—´ì˜ ê¸¸ì´ì™€ íŒ¨í„´ì˜ ê¸¸ì´ê°€ ìµœëŒ€ 2,000 ì´ê¸° ë•Œë¬¸ì— <strong>O(n^2)</strong> ìœ¼ë¡œë„ ê°€ëŠ¥í•œ ë¬¸ì œì…ë‹ˆë‹¤!!</p>

<p>ì €ëŠ” DP ê¸°ë²•ìœ¼ë¡œ í’€ì—ˆìŠµë‹ˆë‹¤.</p>

<p><strong>dp[i][j]</strong> ëŠ” 0 ~ i - 1 ê¹Œì§€ì˜ íŒ¨í„´ìœ¼ë¡œ, 0 ~ j - 1 ê¹Œì§€ì˜ ë¬¸ìì—´ì„ ë§Œì¡±í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>

<p>ì´ ë¬¸ì œì˜ ê²½ìš° íŒ¨í„´ì˜ ì¸ë±ìŠ¤ê°€ 0 ì´ê±°ë‚˜ ë¬¸ìì—´ì˜ ì¸ë±ìŠ¤ê°€ 0 ì¸ ê²½ìš°ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ë³µì¡í•´ì§ˆê±° ê°™ì•„ì„œ</p>

<p>ì¸ë±ìŠ¤ë¥¼ í•˜ë‚˜ì”© ë” ì¨ì„œ ì‚¬ìš© í–ˆìŠµë‹ˆë‹¤.
ì¦‰ dp[0][0] ì€ íŒ¨í„´ 0ê°œ, ë¬¸ìì—´ 0ê°œë¥¼ ì‚¬ìš©í–ˆì„ ë•Œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>

<p>ê²€ì‚¬í•˜ë ¤ëŠ” i - 1 ì˜ íŒ¨í„´ì´ <strong>â€™*â€˜</strong> ì¸ ê²½ìš°ì™€ <strong>â€™?â€™</strong> ë˜ëŠ” <strong>ì•ŒíŒŒë²³ë¬¸ì</strong> ì¸ ê²½ìš°ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>â€™*â€˜</strong> ì¸ ê²½ìš° : ì´ ê²½ìš°ëŠ” ì¦‰ í˜„ì¬ íŒ¨í„´ì„ ëº€ ê²½ìš° ë˜ëŠ” í˜„ì¬ ê²€ì‚¬í•˜ë ¤ëŠ” ë¬¸ìì—´ì—ì„œ ë§ˆì§€ë§‰ ë¬¸ìë¥¼ ëº€ ê²½ìš°ê°€ ë§Œì¡±í•˜ë©´ true ì…ë‹ˆë‹¤. -&gt; dp[i - 1][j] ë˜ëŠ” dp[i][j - 1] ê°€ true ì´ë©´ dp[i][j] ëŠ” true</li>
  <li><strong>â€™?â€™</strong> ë˜ëŠ” <strong>ì•ŒíŒŒë²³ë¬¸ì</strong> ì¸ ê²½ìš° : ì´ ê²½ìš°ëŠ” í˜„ì¬ íŒ¨í„´ê³¼ ê²€ì‚¬í•˜ë ¤ëŠ” ë¬¸ìì—´ì˜ ë§ˆì§€ë§‰ ë¬¸ìë¥¼ ëº€ ê²½ìš° ë§Œì¡±í•˜ë©´ true ì…ë‹ˆë‹¤. -&gt; dp[i - 1][j - 1] ê°€ true ì´ë©´ dp[i][j] ëŠ” true</li>
</ul>

<h2 id="-ì†ŒìŠ¤ì½”ë“œ-ë°-ì†ŒìŠ¤í•´ì„">ğŸ¥½ ì†ŒìŠ¤ì½”ë“œ ë° ì†ŒìŠ¤í•´ì„</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">isMatch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//remove consecutive star e.g) **</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">patternTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span> <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">patternTemp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">p</span> <span class="o">=</span> <span class="nx">patternTemp</span><span class="p">;</span>
  <span class="c1">// dp[i][j] measn from p[0] ~ p[i]</span>
  <span class="kd">let</span> <span class="nx">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">dp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">dp</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">fill</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">//dp[pattern][string]</span>

  <span class="nx">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span> <span class="p">?</span> <span class="kc">true</span> <span class="p">:</span> <span class="kc">false</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">patternIdx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">patternIdx</span> <span class="o">&lt;=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">patternIdx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">stringIdx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">stringIdx</span> <span class="o">&lt;=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">stringIdx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="nx">patternIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dp</span><span class="p">[</span><span class="nx">patternIdx</span><span class="p">][</span><span class="nx">stringIdx</span><span class="p">]</span> <span class="o">=</span>
          <span class="nx">dp</span><span class="p">[</span><span class="nx">patternIdx</span><span class="p">][</span><span class="nx">stringIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="nx">dp</span><span class="p">[</span><span class="nx">patternIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="nx">stringIdx</span><span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span>
        <span class="nx">p</span><span class="p">[</span><span class="nx">patternIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">?</span><span class="dl">"</span> <span class="o">||</span>
        <span class="nx">p</span><span class="p">[</span><span class="nx">patternIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">s</span><span class="p">[</span><span class="nx">stringIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
      <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dp</span><span class="p">[</span><span class="nx">patternIdx</span><span class="p">][</span><span class="nx">stringIdx</span><span class="p">]</span> <span class="o">=</span> <span class="nx">dp</span><span class="p">[</span><span class="nx">patternIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="nx">stringIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">dp</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">][</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">];</span>
</code></pre></div></div>

<h2 id="-ë¬¸ì œ-í›„ê¸°">ğŸ”¨ ë¬¸ì œ í›„ê¸°</h2>

<p>ì²˜ìŒì— íŒ¨í„´ì´ 0 ì¸ ê²½ìš° ë¬¸ìì—´ì´ 0 ì¸ ê²½ìš° ë‹¤ ë‚˜ëˆ„ê³  ìˆë‹¤ê°€ ì´ê²Œ ë­” ì§“ì´ëŒ í•˜ê³  ì¸ë±ìŠ¤ë¥¼ í•˜ë‚˜ ëŠ˜ë ¤ì„œ ê·¸ëƒ¥ ì €ì¥í–ˆë”ë‹ˆ ë” ê°„ê²°í•´ì¡Œë‹¤.</p>

<p>í•­ìƒ ì•Œê³ ë¦¬ì¦˜ì´ ë™ì¼í•˜ë‹¤ë©´ ë” ê°„ê²°í•˜ê²Œ ì“°ê¸° ìœ„í•´ ë…¸ë ¥í•´ì•¼ê² ë‹¤!!</p>

    <hr />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="https://tocktock.github.io/elasticsearch/elasticsearch-search-query/"> Elasticsearch search query ì§‘ì¤‘íƒêµ¬ - 1 </a>
    </h1>

    <span class="post-date">26 Jan 2021</span>

    <p>#[ğŸŒelasticsearch] search query ì§‘ì¤‘íƒêµ¬ - 1 ì „ì²˜ë¦¬ ê³¼ì •</p>

<hr />

<ul>
  <li>
    <p><a href="https://esbook.kimjmin.net/">Elasticsearch ê°€ì´ë“œë¶ âœˆ</a></p>
  </li>
  <li>
    <p><a href="https://www.elastic.co/kr/what-is/elasticsearch">Elasticsearch í™ˆí˜ì´ì§€ ê°€ê¸° âœˆ</a></p>
  </li>
</ul>

<hr />

<h2 id="-elasitcsearch-full-text-search-ì˜-ì›ë¦¬">ğŸ§¡ ElasitcSearch Full-Text-Search ì˜ ì›ë¦¬</h2>

<h3 id="inverted-index">ğŸ™‚Inverted Index</h3>

<p>Elasticsearch ëŠ” â€œtextâ€ ë¡œ ë§¤í•‘ëœ í•„ë“œì˜ ê²½ìš° ê·¸ ì•ˆì— ë°ì´í„°ë¥¼ Inverted Index ë¼ëŠ” êµ¬ì¡°ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>

<p>ì§ì—­í•˜ìë©´ ì—­ ìƒ‰ì¸, ë°˜ëŒ€ ìƒ‰ì¸ ì´ëŸ° ëœ»ì¸ë° ëŒ€ì¶© ê°ì´ ì˜¤ì‹œë‚˜ìš”??</p>

<p>ì˜ˆë“¤ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.
ì•„ë˜ì™€ ê°™ì€ ë°ì´í„°ê°€ ìˆë‹¤ê³  í•©ì‹œë‹¤.</p>

<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>â€œCat is Cuteâ€</td>
    </tr>
    <tr>
      <td>2</td>
      <td>â€œDog is Cute Tooâ€</td>
    </tr>
    <tr>
      <td>3</td>
      <td>â€œCat is lazyâ€</td>
    </tr>
    <tr>
      <td>4</td>
      <td>â€œDog is super athleticâ€</td>
    </tr>
  </tbody>
</table>

<p>ì¼ë°˜ì ì¸ DBMS ì—ì„œëŠ” <strong>â€œathleticâ€</strong> ì„ ê²€ìƒ‰í•˜ê³  ì‹¶ë‹¤í•˜ë©´ 1ë²ˆ ,2ë²ˆ, 3ë²ˆ, 4ë²ˆ ìˆœì„œë¡œ ê²€ìƒ‰í•´ì„œ
<strong>â€œathletiâ€</strong> ì´ ìˆêµ¬ë‚˜ Id 4ë¥¼ ë³´ì—¬ì¤˜ì•¼ì§€. ë¼ê³  í•  ê²ë‹ˆë‹¤.</p>

<p>Inverted Index ëŠ” ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤.
í† í°ë§ˆë‹¤ ê°’ì„ ê°€ì§€ëŠ”ë°, ì´ ê°’ì€ â€œì´ ë¬¸ì„œì— ì´ í† í° ê°’ì´ í¬í•¨ë˜ì–´ ìˆì–´.â€ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
ìœ„ì˜ í…Œì´ë¸”ì„ ì•„ë˜ì™€ ê°™ì€ ì‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th>Token</th>
      <th>Id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>â€œcatâ€</td>
      <td>1, 3</td>
    </tr>
    <tr>
      <td>â€œdogâ€</td>
      <td>2, 4</td>
    </tr>
    <tr>
      <td>â€œcuteâ€</td>
      <td>1, 2</td>
    </tr>
    <tr>
      <td>â€œlazyâ€</td>
      <td>3</td>
    </tr>
    <tr>
      <td>â€œathleticâ€</td>
      <td>4</td>
    </tr>
    <tr>
      <td>â€œsuperâ€</td>
      <td>4</td>
    </tr>
  </tbody>
</table>

<p>ì´ ê°™ì€ ê²½ìš° â€œathleticâ€ í† í°ì´ í¬í•¨ëœ 4ë²ˆ ë¬¸ì„œë§Œ ë³´ë©´ ë©ë‹ˆë‹¤. ë‹¤ë§Œ í† í°ì„ ë¹¨ë¦¬ ì°¾ê¸° ìœ„í•´ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ëŠ” ì¢€ ë³µì¡í•´ì§ˆê²ë‹ˆë‹¤.
ê´œì°®ìŠµë‹ˆë‹¤. <strong>Elasticsearch ê°€ ëŒ€ì‹ í•´ì¤„ê±°ê±°ë“ ìš”!!</strong></p>

<p>ğŸ›‘ğŸ›‘ ë‹¨ ì´ë ‡ê²Œ ì €ì¥ë˜ëŠ” ê±´ ì˜¤ì§ í•„ë“œê°€ <strong>text</strong> íƒ€ì…ì¼ ë•Œë§Œ ì ìš©ë©ë‹ˆë‹¤.
ë‹¤ë¥¸ë§ë¡œ í•˜ìë©´ text í•„ë“œê°€ ì•„ë‹ˆë©´ ì „ë¬¸ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì“¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!!</p>

<h3 id="analizer">ğŸ™‚Analizer</h3>

<p>ìœ„ì˜ ì˜ˆì‹œì—ì„œ ëˆˆì¹˜ì±„ì‹  ë¶„ë„ ê³„ì‹œê² ì§€ë§Œ, ì²˜ìŒ í…Œì´ë¸”ì˜ ë‚´ìš©ì„ Inverted Index ë°©ë²•ìœ¼ë¡œ ì €ì¥í•  ë•Œ ì „ë¶€ ì†Œë¬¸ìë¡œ ë°”ë€Œì–´ì„œ ì €ì¥ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  ì €ì¥ë˜ì§€ ì•Šì€ ë‹¨ì–´ë“¤ë„ ìˆêµ°ìš”. ì´ ê³¼ì •ì„ <strong>Text Analysis</strong> ë¼ê³  í•©ë‹ˆë‹¤.
ì´ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šê³  ì§„í–‰í•˜ê²Œ ë˜ë©´ ê²€ìƒ‰ì— í•„ìš” ì—†ëŠ”ë‹¨ì–´ ê°€ë ¹ â€œisâ€, â€œtooâ€ ê¹Œì§€ ì €ì¥í•´ì•¼í•©ë‹ˆë‹¤.</p>

<p>ìš°ë¦¬ê°€ â€œdOGâ€ ë¼ê³  ê²€ìƒ‰í•´ë„ â€œDogâ€ ê°€ í¬í•¨ëœ ë¬¸ì„œë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ í† í°í™”í•˜ëŠ” ê³¼ì •ì— ì „ì²˜ë¦¬ ê³¼ì •ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>

<h4 id="1-character-filter">1. Character Filter</h4>

<p><strong>Character Filter</strong> ëŠ” ì „ì²˜ë¦¬ê³¼ì •ì—ì„œ ê°€ì¥ ë¨¼ì € ìˆ˜í–‰ë˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
<strong>Character Filter</strong> ì—ëŠ” <strong>HTML Strip, Mapping, Pattern Replace</strong> ì„¸ ê°€ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<ul>
  <li><strong>HTML Strip</strong> : ë¬¸ì¥ì— HTML íƒœê·¸ë“¤ì„ ì—†ì• ì£¼ëŠ” Filter ì…ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ë©´,
<code class="language-plaintext highlighter-rouge">&lt;p&gt;I&amp;apos;m so &lt;b&gt;happy&lt;/b&gt;!&lt;/p&gt;</code> ë¼ëŠ” ë¬¸ì¥ì„ <code class="language-plaintext highlighter-rouge">I'm so happy!</code> ë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.</li>
  <li><strong>Mapping</strong> : íŠ¹ì • ë¬¸ìì—´ì„ ë‚´ê°€ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>Pattern Replace</strong> : íŠ¹ì • ì •ê·œì‹ íŒ¨í„´ì„ ë‚´ê°€ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>

<h4 id="2-tokenizer-filter">2. Tokenizer Filter</h4>

<p><strong>Tokenizer Filter</strong> ëŠ” ë¬¸ìì—´ì„ ë°›ì•„ ë‹¨ì–´ë“¤ì„ í† í°í™”í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
Tokenizer Filter ëŠ” ë§ì€ ì¢…ë¥˜ê°€ ìˆëŠ”ë° ëŒ€í‘œì ì¸ 3ê°€ì§€ë¥¼ ë¨¼ì € ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Standard</strong> : í† í°í™” í•  ë•Œ <strong>ê³µë°±ê³¼ hyphen(-)ì„</strong> ê¸°ì¤€ìœ¼ë¡œ í† í°í™”ë¥¼ ìˆ˜í–‰í•˜ë©°, ì¼ë¶€ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤.</li>
  <li><strong>Letter</strong> : í† í°í™” í•  ë•Œ <strong>ë¬¸ìì—´ ì´ì™¸</strong>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í† í°í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
ì˜ˆë“¤ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">Brown-Foxes dog's</code> ê°™ì€ ë¬¸ìì—´ì€ [Brown, Foxes, dog, s] ë¡œ í† í°í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
  <li><strong>Whitespace</strong> : <strong>ê³µë°±</strong> ì„ ê¸°ì¤€ìœ¼ë¡œ í† í°í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê³µë°±, ì¤„ë°”ê¿ˆ, íƒ­ ëª¨ë“  ê³µë°±ì„ í¬í•¨í•©ë‹ˆë‹¤.</li>
</ul>

<blockquote>
  <p>Email, URL, Path ì™€ íŠ¹ìˆ˜ ëª©ì ìš© Tokenizer ë“¤ì´ ë§ìœ¼ë‹ˆ ìì„¸í•œ ì •ë³´ëŠ” <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html">Tokenizer Document</a> ë¥¼ ì°¸ì¡°í•´ì£¼ì‹œì™€ìš”.!!</p>
</blockquote>

<h4 id="3-token-filter">3. Token Filter</h4>

<p><strong>Token Filter</strong> ëŠ” ê° Tokenizer Filter ì— ì˜í•´ ë§Œë“¤ì–´ì§„ Token ë“¤ì— ëŒ€í•œ í›„ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
ê°€ì¥ ëŒ€í‘œì ì¸ Lowercase Token Filterr ë¡œ Stop Token Filterr ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Lowercase</strong> : ë§ ê·¸ëŒ€ë¡œ í† í°ë“¤ì„ ì†Œë¬¸ìë¡œ <strong>ë°”ê¾¸ëŠ”</strong> Token filter ì…ë‹ˆë‹¤.</li>
  <li><strong>Stop</strong> : Search ê¸°ëŠ¥ì— í•„ìš” ì—†ëŠ” ë‹¨ì–´ë“¤ ì˜ˆë¥¼ ë“¤ë©´ is, be, to, a, as ë“±ì„ ì—†ì• ëŠ” í•„í„°ì…ë‹ˆë‹¤.</li>
</ul>

<blockquote>
  <p>ë” ë§ì€ Token filter ë¥¼ ë³´ê³  ì‹¶ìœ¼ë©´ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/analysis-tokenfilters.html">Token Filters</a> ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”!! ì˜¤ë¥¸ìª½ ë©”ë‰´ë°”ì— ë‹¤ì–‘í•œ Token filters ê°€ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<h4 id="4-stemming">4. Stemming</h4>

<p>ë˜í•œ ê° í† í°ë“¤ì€ ê·¸ ì›í˜•ì„ ìœ ì§€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ <code class="language-plaintext highlighter-rouge">working</code> ì—ì„œ <code class="language-plaintext highlighter-rouge">ing</code> ëŠ” í•„ìš” ì—†ëŠ” ë¶€ë¶„ì´ë©° ìš°ë¦¬ëŠ” work ë§Œ ê²€ìƒ‰í•˜ë©´ ë©ë‹ˆë‹¤.
ì´ëŸ¬í•œ ê³¼ì •ì„ Stemming ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>

<h4 id="etc">ETC</h4>

<p>ìš°ë¦¬ê°€ ë¬¸ì„œì— ì˜ì–´ë§Œ ì“°ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ ê·¸ ë‚˜ë¼ì—ì„œëŠ” ê·¸ ë‚˜ë¼ ì–¸ì–´ë¥¼ ë§ì´ ì“¸ ê²ƒì…ë‹ˆë‹¤.
ElasticSearch ì— ë‚´ì¥ëœ ì–¸ì–´ë¶„ì„ê¸°ê°€ ì—†ë‹¤ë©´, Full-Text-Search ì— ë‚œí•­ì„ ê²ªì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.
ë‹¤í–‰ì´ë„ í•œê¸€ì˜ ê²½ìš°ëŠ” Nori í•œê¸€ í˜•íƒœì†Œ ë¶„ì„ê¸°ë¥¼ ì´ìš©í•˜ì—¬ ì´ ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>ìì„¸í•œ ë‚´ìš©ì€ Elasticsearch Document ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!! <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/analysis-nori.html">Nori Analysis Plugin êµ¬ê²½í•˜ê¸°</a></p>
</blockquote>

<hr />

<p>ìœ„ ê³¼ì •ì„ í†µí•´ ì €ì¥ëœ í† í°ë“¤ì„ í†µí•´ Search API ê¸°ëŠ¥ë“¤ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>

<p>ë‹¤ìŒì—ëŠ” query ë¥¼ í†µí•´ ì‹¤ì œ ì˜ˆì œë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.</p>

<p>í”¼ë“œë°±ì€ í•­ìƒ í™˜ì˜ì…ë‹ˆë‹¤.</p>

    <hr />
  </div>
  
</div>

<div class="pagination">
  
  <a
    class="pagination-item older"
    href="https://tocktock.github.io/page2"
    >Older</a
  >
   
  <span class="pagination-item newer">Newer</span>
  
</div>
</div>
  
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src="/public/js/script.js"></script>
  </body>
</html>
